=== Run Tests ===
..F                                                                      [100%]
================================== FAILURES ===================================
_______________ TestXLACompileSpecial.test_none_output_handling _______________

self = <test_tensorflow_python_compiler_xla_xla_special.TestXLACompileSpecial object at 0x000001ADB1DEFBB0>

    def test_none_output_handling(self):
        """测试None输出处理"""
    
        # 定义返回None的函数
        def none_output_computation(x):
            # 执行操作但不返回张量
            _ = tf.reduce_sum(x)  # 操作会被执行
            return None
    
        # 创建测试输入
        x = create_test_tensor((3, 4), np.float32)
    
        # 直接调用计算函数
        # 注意：直接调用返回None
        direct_result = none_output_computation(x)
        assert direct_result is None, "直接调用应该返回None"
    
        # 使用 xla.compile 编译计算
>       compiled_result = xla.compile(none_output_computation, inputs=[x])

tests\test_tensorflow_python_compiler_xla_xla_special.py:128: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\util\deprecation.py:344: in new_func
    return func(*args, **kwargs)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\compiler\xla\xla.py:120: in compile
    return xla_compile_wrapper()
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\util\traceback_utils.py:153: in error_handler
    raise e.with_traceback(filtered_tb) from None
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

x = <tf.Operation 'output_0' type=NoOp>

    def convert(x):
      """Converts a function output to a Tensor."""
      if x is None:
        return None
      if op_return_value is not None and isinstance(x, ops.Operation):
        # TODO(b/79881896): we currently can't capture external control deps, so
        # this won't work if x needs to be captured (i.e. if python_func returns
        # captured Operations).
        with ops.control_dependencies([x]):
          x = array_ops.identity(op_return_value)
      elif not isinstance(x, tensor_array_ops.TensorArray):
        try:
          x = ops.convert_to_tensor_or_composite(x)
        except (ValueError, TypeError):
>         raise TypeError(
              "To be compatible with tf.function, Python functions "
              "must return zero or more Tensors or ExtensionTypes or None "
              f"values; in compilation of {str(python_func)}, found return "
              f"value of type {type(x).__name__}, which is not a Tensor or "
              "ExtensionType.")
E         TypeError: To be compatible with tf.function, Python functions must return zero or more Tensors or ExtensionTypes or None values; in compilation of <function compile.<locals>.xla_compile_wrapper at 0x000001ADB30E5940>, found return value of type Operation, which is not a Tensor or ExtensionType.

D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\framework\func_graph.py:1117: TypeError

---------- coverage: platform win32, python 3.9.25-final-0 -----------
Name                                                       Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------------------------------------------------
test_actual_behavior.py                                        0      0      0      0   100%
tests\test_tensorflow_python_compiler_xla_xla_special.py      70     22     12      3    65%   27, 34-39, 132-170, 187
------------------------------------------------------------------------------------------------------
TOTAL                                                         70     22     12      3    65%
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests\test_tensorflow_python_compiler_xla_xla_special.py::TestXLACompileSpecial::test_none_output_handling
1 failed, 2 passed in 1.94s

Error: exit 1