=== Run Tests ===
EF.EE                                                                    [100%]
=================================== ERRORS ====================================
______________ ERROR at setup of test_basic_enable_disable_flow _______________

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1226: AttributeError

During handling of the above exception, another exception occurred:

    @pytest.fixture
    def mock_debug_events_writer():
        """Mock DebugEventsWriter to avoid actual file I/O."""
>       with mock.patch('tensorflow.python.debug.lib.debug_events_writer.DebugEventsWriter') as mock_writer:

tests\test_tensorflow_python_debug_lib_dumping_callback.py:26: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1388: in __enter__
    self.target = self.getter()
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1563: in <lambda>
    getter = lambda: _importer(target)
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1239: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
            __import__(import_path)
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1229: AttributeError
____________ ERROR at setup of test_basic_tensor_debug_mode_shape _____________

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1226: AttributeError

During handling of the above exception, another exception occurred:

    @pytest.fixture
    def mock_debug_events_writer():
        """Mock DebugEventsWriter to avoid actual file I/O."""
>       with mock.patch('tensorflow.python.debug.lib.debug_events_writer.DebugEventsWriter') as mock_writer:

tests\test_tensorflow_python_debug_lib_dumping_callback.py:26: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1388: in __enter__
    self.target = self.getter()
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1563: in <lambda>
    getter = lambda: _importer(target)
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1239: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
            __import__(import_path)
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1229: AttributeError
__________________ ERROR at setup of test_op_regex_filtering __________________

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1226: AttributeError

During handling of the above exception, another exception occurred:

    @pytest.fixture
    def mock_debug_events_writer():
        """Mock DebugEventsWriter to avoid actual file I/O."""
>       with mock.patch('tensorflow.python.debug.lib.debug_events_writer.DebugEventsWriter') as mock_writer:

tests\test_tensorflow_python_debug_lib_dumping_callback.py:26: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1388: in __enter__
    self.target = self.getter()
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1563: in <lambda>
    getter = lambda: _importer(target)
D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1239: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

thing = <module 'tensorflow' from 'D:\\Coding\\Anaconda\\envs\\testagent-experiment\\lib\\site-packages\\tensorflow\\__init__.py'>
comp = 'python', import_path = 'tensorflow.python'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
            __import__(import_path)
>           return getattr(thing, comp)
E           AttributeError: module 'tensorflow' has no attribute 'python'

D:\Coding\Anaconda\envs\testagent-experiment\lib\unittest\mock.py:1229: AttributeError
================================== FAILURES ===================================
_ test_invalid_parameters_exception_handling[-NO_TENSOR-ValueError-dump_root] _

dump_root = '', tensor_debug_mode = 'NO_TENSOR'
expected_error_type = <class 'ValueError'>, error_contains = 'dump_root'
reset_dumping_state = None

    @pytest.mark.parametrize(
        "dump_root,tensor_debug_mode,expected_error_type,error_contains",
        [
            # Test case 1: empty dump_root
            (
                "",  # empty dump_root
                "NO_TENSOR",
                ValueError,
                "dump_root"
            ),
            # Test case 2: invalid tensor_debug_mode
            (
                "/tmp/test_dump_2",
                "INVALID_MODE",  # invalid mode
                ValueError,
                "tensor_debug_mode"
            ),
        ]
    )
    def test_invalid_parameters_exception_handling(
        dump_root,
        tensor_debug_mode,
        expected_error_type,
        error_contains,
        reset_dumping_state
    ):
        """TC-02: 无效参数异常处理"""
        # Weak assertion: empty_dump_root_error / invalid_mode_error
        with pytest.raises(expected_error_type) as exc_info:
            dumping_callback.enable_dump_debug_info(
                dump_root=dump_root,
                tensor_debug_mode=tensor_debug_mode,
                circular_buffer_size=1000,
                op_regex=None,
                tensor_dtypes=None
            )
    
        # Weak assertion: error_message_contains
        error_msg = str(exc_info.value).lower()
>       assert error_contains.lower() in error_msg, \
            f"Error message should contain '{error_contains}', got: {error_msg}"
E       AssertionError: Error message should contain 'dump_root', got: empty or none dump root
E       assert 'dump_root' in 'empty or none dump root'
E        +  where 'dump_root' = <built-in method lower of str object at 0x000001853DCA89F0>()
E        +    where <built-in method lower of str object at 0x000001853DCA89F0> = 'dump_root'.lower

tests\test_tensorflow_python_debug_lib_dumping_callback.py:144: AssertionError

---------- coverage: platform win32, python 3.9.25-final-0 -----------
Name                                                         Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------------------------------
tests\test_tensorflow_python_debug_lib_dumping_callback.py      86     48      6      2    46%   20->exit, 27-29, 34-37, 67-100, 169-220, 245-291, 305
--------------------------------------------------------------------------------------------------------
TOTAL                                                           86     48      6      2    46%
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests\test_tensorflow_python_debug_lib_dumping_callback.py::test_invalid_parameters_exception_handling[-NO_TENSOR-ValueError-dump_root]
ERROR tests\test_tensorflow_python_debug_lib_dumping_callback.py::test_basic_enable_disable_flow
ERROR tests\test_tensorflow_python_debug_lib_dumping_callback.py::test_basic_tensor_debug_mode_shape
ERROR tests\test_tensorflow_python_debug_lib_dumping_callback.py::test_op_regex_filtering
1 failed, 1 passed, 3 errors in 1.80s

Error: exit 1