=== Run Tests ===
FFF............                                                          [100%]
================================== FAILURES ===================================
____________ test_tensorshape_construction[dims0-2-expected_dims0] ____________

dims = [2, 3], expected_rank = 2, expected_dims = [2, 3]

    @pytest.mark.parametrize(
        "dims,expected_rank,expected_dims",
        [
            ([2, 3], 2, [2, 3]),
            ([], 0, []),
            (None, None, None),
        ]
    )
    def test_tensorshape_construction(dims, expected_rank, expected_dims):
        """测试 TensorShape 基本构造"""
        # 创建 TensorShape 对象
        shape = tensor_shape.TensorShape(dims)
    
        # 验证 rank 属性
        assert shape.rank == expected_rank
    
        # 验证 dims 属性
        if expected_dims is None:
            assert shape.dims is None
        else:
            assert shape.dims is not None
            assert len(shape.dims) == len(expected_dims)
    
            # 验证每个维度的值
            for i, (dim, expected) in enumerate(zip(shape.dims, expected_dims)):
                if expected is None:
                    assert dim.value is None
                else:
                    assert dim.value == expected
    
        # 验证 is_fully_defined 属性
        if expected_dims is None:
            # 对于 None 输入，is_fully_defined 应该为 False
            assert not shape.is_fully_defined
        else:
            # 根据 TensorFlow 实现，is_fully_defined 检查所有维度值是否不为 None
            # 对于空列表 []，所有维度都已知（因为没有维度）
            # 对于 [2, 3]，所有维度都已知
            # 注意：这里需要检查 dims 是否为 None，而不是 expected_dims
            if dims is None:
                assert not shape.is_fully_defined
            else:
                # 检查是否所有维度都已知
                all_known = all(d is not None for d in expected_dims)
>               assert shape.is_fully_defined == all_known
E               assert is_fully_defined == True
E                +  where is_fully_defined = TensorShape([2, 3]).is_fully_defined

tests\test_tensorflow_python_framework_tensor_shape.py:80: AssertionError
____________ test_tensorshape_construction[dims1-0-expected_dims1] ____________

dims = [], expected_rank = 0, expected_dims = []

    @pytest.mark.parametrize(
        "dims,expected_rank,expected_dims",
        [
            ([2, 3], 2, [2, 3]),
            ([], 0, []),
            (None, None, None),
        ]
    )
    def test_tensorshape_construction(dims, expected_rank, expected_dims):
        """测试 TensorShape 基本构造"""
        # 创建 TensorShape 对象
        shape = tensor_shape.TensorShape(dims)
    
        # 验证 rank 属性
        assert shape.rank == expected_rank
    
        # 验证 dims 属性
        if expected_dims is None:
            assert shape.dims is None
        else:
            assert shape.dims is not None
            assert len(shape.dims) == len(expected_dims)
    
            # 验证每个维度的值
            for i, (dim, expected) in enumerate(zip(shape.dims, expected_dims)):
                if expected is None:
                    assert dim.value is None
                else:
                    assert dim.value == expected
    
        # 验证 is_fully_defined 属性
        if expected_dims is None:
            # 对于 None 输入，is_fully_defined 应该为 False
            assert not shape.is_fully_defined
        else:
            # 根据 TensorFlow 实现，is_fully_defined 检查所有维度值是否不为 None
            # 对于空列表 []，所有维度都已知（因为没有维度）
            # 对于 [2, 3]，所有维度都已知
            # 注意：这里需要检查 dims 是否为 None，而不是 expected_dims
            if dims is None:
                assert not shape.is_fully_defined
            else:
                # 检查是否所有维度都已知
                all_known = all(d is not None for d in expected_dims)
>               assert shape.is_fully_defined == all_known
E               assert is_fully_defined == True
E                +  where is_fully_defined = TensorShape([]).is_fully_defined

tests\test_tensorflow_python_framework_tensor_shape.py:80: AssertionError
________________ test_tensorshape_construction[None-None-None] ________________

dims = None, expected_rank = None, expected_dims = None

    @pytest.mark.parametrize(
        "dims,expected_rank,expected_dims",
        [
            ([2, 3], 2, [2, 3]),
            ([], 0, []),
            (None, None, None),
        ]
    )
    def test_tensorshape_construction(dims, expected_rank, expected_dims):
        """测试 TensorShape 基本构造"""
        # 创建 TensorShape 对象
        shape = tensor_shape.TensorShape(dims)
    
        # 验证 rank 属性
        assert shape.rank == expected_rank
    
        # 验证 dims 属性
        if expected_dims is None:
            assert shape.dims is None
        else:
            assert shape.dims is not None
            assert len(shape.dims) == len(expected_dims)
    
            # 验证每个维度的值
            for i, (dim, expected) in enumerate(zip(shape.dims, expected_dims)):
                if expected is None:
                    assert dim.value is None
                else:
                    assert dim.value == expected
    
        # 验证 is_fully_defined 属性
        if expected_dims is None:
            # 对于 None 输入，is_fully_defined 应该为 False
>           assert not shape.is_fully_defined
E           assert not is_fully_defined
E            +  where is_fully_defined = TensorShape(None).is_fully_defined

tests\test_tensorflow_python_framework_tensor_shape.py:69: AssertionError

---------- coverage: platform win32, python 3.9.25-final-0 -----------
Name                                                     Stmts   Miss Branch BrPart  Cover   Missing
----------------------------------------------------------------------------------------------------
tests\test_tensorflow_python_framework_tensor_shape.py     163     24     36      6    81%   62, 76, 83-101, 141-147, 152-154, 206->exit, 314->322, 317-319
----------------------------------------------------------------------------------------------------
TOTAL                                                      163     24     36      6    81%
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests\test_tensorflow_python_framework_tensor_shape.py::test_tensorshape_construction[dims0-2-expected_dims0]
FAILED tests\test_tensorflow_python_framework_tensor_shape.py::test_tensorshape_construction[dims1-0-expected_dims1]
FAILED tests\test_tensorflow_python_framework_tensor_shape.py::test_tensorshape_construction[None-None-None]
3 failed, 12 passed in 1.58s

Error: exit 1