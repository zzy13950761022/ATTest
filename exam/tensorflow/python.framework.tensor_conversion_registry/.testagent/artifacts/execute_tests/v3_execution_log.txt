=== Run Tests ===
.F......F.                                                               [100%]
================================== FAILURES ===================================
_____________________ test_different_mock_func_signature ______________________

different_mock_func = <function different_mock_func.<locals>.conversion_func at 0x000001BBBF514C10>

    def test_different_mock_func_signature(different_mock_func):
        """Test that different_mock_func has correct signature."""
        import inspect
        sig = inspect.signature(different_mock_func)
        params = list(sig.parameters.keys())
        expected_params = ['value', 'dtype', 'name', 'as_ref']
        assert params == expected_params, f"Expected parameters {expected_params}, got {params}"
    
        # Test calling and verify mock name
        test_value = object()
        result = different_mock_func(test_value, dtype=None, name="test", as_ref=False)
        assert isinstance(result, mock.MagicMock), "Should return MagicMock"
>       assert result.name == "different_func", "Mock should have correct name"
E       AssertionError: Mock should have correct name
E       assert <MagicMock name='different_func.name' id='1905880504640'> == 'different_func'
E        +  where <MagicMock name='different_func.name' id='1905880504640'> = <MagicMock name='different_func' id='1905880483776'>.name

tests\test_tensorflow_python_framework_tensor_conversion_registry_g1.py:94: AssertionError
_______________________ test_different_mock_func_usage ________________________

custom_class = <class 'test_tensorflow_python_framework_tensor_conversion_registry_g1.custom_class.<locals>.CustomClass'>
different_mock_func = <function different_mock_func.<locals>.conversion_func at 0x000001BBC066FA60>
mock_conversion_func = <function mock_conversion_func.<locals>.conversion_func at 0x000001BBC066F310>

    def test_different_mock_func_usage(custom_class, different_mock_func, mock_conversion_func):
        """Test usage of different_mock_func fixture and additional test branches.
    
        TC-06: 未使用的fixture和测试分支
        Weak asserts: registration_success, function_comparison, priority_handling
        """
        # Test 1: Register different_mock_func and verify it works
        tensor_conversion_registry.register_tensor_conversion_function(
            base_type=custom_class,
            conversion_func=different_mock_func,
            priority=75
        )
    
        # Query for conversion functions
        conversion_funcs = tensor_conversion_registry.get(custom_class)
    
        # Weak assertion 1: registration_success
        assert isinstance(conversion_funcs, list), "Should return a list"
        assert len(conversion_funcs) > 0, "Should have registered function"
    
        # Check that different_mock_func is in the results
        found_different_func = False
        for base_type, func in conversion_funcs:
            if func is different_mock_func:
                found_different_func = True
                break
        assert found_different_func, "different_mock_func should be in query results"
    
        # Test calling the function
        test_value = custom_class()
        result = different_mock_func(test_value, dtype=None, name="test", as_ref=False)
        assert result is not None, "different_mock_func should return a mock object"
>       assert result.name == "different_func", "Mock should have correct name"
E       AssertionError: Mock should have correct name
E       assert <MagicMock name='different_func.name' id='1905898643264'> == 'different_func'
E        +  where <MagicMock name='different_func.name' id='1905898643264'> = <MagicMock name='different_func' id='1905898595328'>.name

tests\test_tensorflow_python_framework_tensor_conversion_registry_g1.py:490: AssertionError

---------- coverage: platform win32, python 3.9.25-final-0 -----------
Name                                                                      Stmts   Miss Branch BrPart  Cover   Missing
---------------------------------------------------------------------------------------------------------------------
tests\test_tensorflow_python_framework_tensor_conversion_registry_g1.py     389    151     96     18    56%   142->146, 143->142, 204->218, 213-215, 218->227, 264->269, 265->264, 270->275, 271->270, 311-313, 316->320, 327, 339->343, 340->339, 360->366, 392->396, 396->401, 410, 431-432, 480->484, 481->480, 494-806
---------------------------------------------------------------------------------------------------------------------
TOTAL                                                                       389    151     96     18    56%
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests\test_tensorflow_python_framework_tensor_conversion_registry_g1.py::test_different_mock_func_signature
FAILED tests\test_tensorflow_python_framework_tensor_conversion_registry_g1.py::test_different_mock_func_usage
2 failed, 8 passed in 1.60s

Error: exit 1