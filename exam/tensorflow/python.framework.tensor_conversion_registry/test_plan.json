{
  "plan_version": 2,
  "target": "tensorflow.python.framework.tensor_conversion_registry",
  "block_rules": {
    "header_block": "HEADER",
    "footer_block": "FOOTER",
    "case_prefix": "CASE_",
    "case_format": "CASE_01"
  },
  "iteration_strategy": {
    "round1": {
      "include": "SMOKE_SET",
      "assert_level": "weak",
      "max_blocks": 5
    },
    "roundN": {
      "only_fix_failed_blocks": true,
      "block_limit": 3,
      "promote_deferred": true
    },
    "final": {
      "enable_strong_asserts": true,
      "coverage_optional": true
    }
  },
  "test_files": {
    "default": "tests/test_tensorflow_python_framework_tensor_conversion_registry.py",
    "all_pattern": "tests/test_tensorflow_python_framework_tensor_conversion_registry_*.py",
    "groups": {
      "G1": "tests/test_tensorflow_python_framework_tensor_conversion_registry_g1.py",
      "G2": "tests/test_tensorflow_python_framework_tensor_conversion_registry_g2.py"
    }
  },
  "active_group_order": ["G1", "G2"],
  "groups": [
    {
      "group_id": "G1",
      "title": "注册功能测试组",
      "entrypoints": ["register_tensor_conversion_function"],
      "smoke_set": ["CASE_01", "CASE_02"],
      "deferred_set": ["CASE_05", "CASE_06"],
      "note": "测试类型注册、优先级排序和异常处理"
    },
    {
      "group_id": "G2",
      "title": "查询功能测试组",
      "entrypoints": ["get"],
      "smoke_set": ["CASE_03", "CASE_04"],
      "deferred_set": ["CASE_07", "CASE_08"],
      "note": "测试查询功能、缓存机制和线程安全"
    }
  ],
  "cases": [
    {
      "tc_id": "TC-01",
      "block_id": "CASE_01",
      "group_id": "G1",
      "name": "基本类型注册与查询",
      "priority": "High",
      "param_matrix": [
        {
          "base_type": "CustomClass",
          "priority": 100,
          "conversion_func": "mock_conversion_func"
        }
      ],
      "asserts": {
        "weak": ["registration_success", "query_returns_func", "priority_order"],
        "strong": ["exact_func_match", "cache_updated", "thread_safe"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 70,
      "max_params": 4,
      "is_parametrized": false,
      "requires_mock": true
    },
    {
      "tc_id": "TC-02",
      "block_id": "CASE_02",
      "group_id": "G1",
      "name": "禁止类型注册异常",
      "priority": "High",
      "param_matrix": [
        {
          "base_type": "int",
          "priority": 100,
          "conversion_func": "mock_conversion_func",
          "expected_exception": "TypeError"
        },
        {
          "base_type": "np.ndarray",
          "priority": 100,
          "conversion_func": "mock_conversion_func",
          "expected_exception": "TypeError"
        }
      ],
      "asserts": {
        "weak": ["exception_raised", "exception_type", "error_message"],
        "strong": ["registry_unchanged", "cache_unchanged", "no_side_effects"]
      },
      "oracle": "exception_verification",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 65,
      "max_params": 5,
      "is_parametrized": true,
      "requires_mock": true
    },
    {
      "tc_id": "TC-03",
      "block_id": "CASE_03",
      "group_id": "G2",
      "name": "查询未注册类型",
      "priority": "High",
      "param_matrix": [
        {
          "query_type": "UnregisteredClass",
          "expected_result": "empty_list_or_default"
        }
      ],
      "asserts": {
        "weak": ["returns_list", "list_length", "contains_default"],
        "strong": ["exact_default_func", "cache_behavior", "performance_ok"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 60,
      "max_params": 3,
      "is_parametrized": false,
      "requires_mock": true
    },
    {
      "tc_id": "TC-04",
      "block_id": "CASE_04",
      "group_id": "G2",
      "name": "优先级排序验证",
      "priority": "High",
      "param_matrix": [
        {
          "base_type": "CustomClass",
          "funcs": [
            {"func": "func_low", "priority": 200},
            {"func": "func_high", "priority": 50}
          ]
        }
      ],
      "asserts": {
        "weak": ["returns_list", "correct_order", "contains_all"],
        "strong": ["exact_order", "priority_respected", "no_duplicates"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "M",
      "max_lines": 80,
      "max_params": 5,
      "is_parametrized": false,
      "requires_mock": true
    },
    {
      "tc_id": "TC-05",
      "block_id": "CASE_05",
      "group_id": "G1",
      "name": "类型元组注册",
      "priority": "Medium",
      "param_matrix": [
        {
          "base_type": "(CustomClass1, CustomClass2)",
          "priority": 100,
          "conversion_func": "mock_conversion_func"
        }
      ],
      "asserts": {
        "weak": ["registration_success", "both_types_registered", "query_works"],
        "strong": ["each_type_independent", "cache_updated", "no_conflicts"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 70,
      "max_params": 4,
      "is_parametrized": false,
      "requires_mock": true
    }
  ],
  "param_extensions": [
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "base_type": "AnotherCustomClass",
        "priority": 50,
        "conversion_func": "different_mock_func"
      },
      "note": "不同优先级和类型的参数扩展"
    },
    {
      "base_block_id": "CASE_02",
      "priority": "Medium",
      "params": {
        "base_type": "float",
        "priority": 100,
        "conversion_func": "mock_conversion_func",
        "expected_exception": "TypeError"
      },
      "note": "更多禁止类型的异常测试"
    },
    {
      "base_block_id": "CASE_03",
      "priority": "Medium",
      "params": {
        "query_type": "AnotherUnregisteredClass",
        "expected_result": "empty_list_or_default"
      },
      "note": "更多未注册类型的查询测试"
    },
    {
      "base_block_id": "CASE_04",
      "priority": "Medium",
      "params": {
        "base_type": "AnotherCustomClass",
        "funcs": [
          {"func": "func1", "priority": 10},
          {"func": "func2", "priority": 30},
          {"func": "func3", "priority": 20}
        ]
      },
      "note": "更多函数的优先级排序测试"
    }
  ],
  "smoke_set": ["CASE_01", "CASE_02", "CASE_03", "CASE_04"],
  "deferred_set": ["CASE_05", "CASE_06", "CASE_07", "CASE_08"]
}