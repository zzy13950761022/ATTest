# tensorflow.python.framework.config 测试计划

## 1. 测试策略
- 单元测试框架：pytest
- 隔离策略：mock/monkeypatch/fixtures 模拟硬件环境
- 随机性处理：固定随机种子，控制设备模拟状态
- 硬件依赖处理：mock GPU/TPU 设备，支持无硬件环境测试

## 2. 生成规格摘要（来自 test_plan.json）
- **SMOKE_SET**: CASE_01, CASE_02, CASE_03, CASE_04, CASE_05
- **DEFERRED_SET**: CASE_06
- **group 列表**: G1（设备与线程配置）, G2（内存与实验功能）
- **active_group_order**: G1 → G2
- **断言分级策略**: 首轮仅使用 weak 断言（基础功能验证），后续启用 strong 断言（行为验证）
- **预算策略**: 
  - size: S（小型测试）
  - max_lines: 60-75 行
  - max_params: 3-6 个参数
  - 50% 测试需要 mock

## 3. 数据与边界
- **正常数据集**: 模拟 CPU/GPU 设备列表，标准线程数（4,8），布尔开关状态
- **边界值**: 
  - 线程数=0（系统默认）
  - 空设备列表（无GPU环境）
  - 无效设备类型字符串
  - 不存在的设备索引
- **极端形状**: 多GPU设备模拟（2个GPU）
- **负例与异常场景**:
  - 无效设备类型触发 ValueError
  - 负线程数触发 ValueError
  - 不支持功能调用触发 RuntimeError
  - 设备不存在触发 ValueError

## 4. 覆盖映射
| TC ID | 对应需求 | 覆盖约束 |
|-------|----------|----------|
| TC-01 | 基本设备查询 | 设备列表返回正确结构 |
| TC-02 | 线程配置一致性 | 设置后查询值匹配 |
| TC-03 | 内存增长配置 | GPU设备内存策略设置 |
| TC-04 | TensorFloat-32控制 | 实验功能开关状态 |
| TC-05 | 异常处理 | 无效参数触发预期异常 |

## 5. 尚未覆盖的风险点
- 多线程并发配置竞争条件
- 运行时初始化前后配置限制
- 内存统计精度验证（±1MB误差）
- 操作确定性性能影响
- 实验性API变更兼容性
- 真实硬件环境差异