# tensorflow.python.framework.graph_io 测试计划

## 1. 测试策略
- 单元测试框架：pytest
- 隔离策略：使用 mock 模拟文件系统操作和 GCS 客户端
- 随机性处理：固定随机种子生成测试图结构
- 测试分组：分为核心功能测试(G1)和异常边界测试(G2)

## 2. 生成规格摘要（来自 test_plan.json）
- **SMOKE_SET**: CASE_01, CASE_02, CASE_03, CASE_04
- **DEFERRED_SET**: CASE_05, CASE_06, CASE_07
- **group 列表**: G1(核心写入功能测试), G2(异常与边界测试)
- **active_group_order**: G1, G2
- **断言分级策略**: 首轮使用 weak 断言，最终轮启用 strong 断言
- **预算策略**: 
  - size: S(小型测试) 60-80行
  - max_params: 5-6个参数
  - 参数化测试优先复用已有用例

## 3. 数据与边界
- **正常数据集**: 小型计算图(2-3个节点)，标准路径和文件名
- **边界值**: 空图对象、None输入、空字符串路径、特殊字符文件名
- **极端形状**: 大图对象(100+节点)、超长路径字符串
- **空输入**: 空图、空目录路径、空文件名
- **负例场景**: 
  - 无效类型输入(字符串、None)
  - 权限不足目录
  - 非法文件名字符
  - GCS网络错误
  - 并发写入冲突

## 4. 覆盖映射
| TC_ID | 需求/约束覆盖 | 风险点 |
|-------|--------------|--------|
| TC-01 | Graph对象文本格式写入 | 文件编码规范未明确 |
| TC-02 | GraphDef二进制格式写入 | 二进制格式兼容性验证 |
| TC-03 | 无效输入异常处理 | 错误信息一致性 |
| TC-04 | 目录自动创建功能 | 跨平台目录权限 |
| TC-05 | GCS远程路径支持 | GCS客户端依赖 |
| TC-06 | 特殊字符处理 | 文件名编码问题 |
| TC-07 | 文件权限错误 | 资源清理完整性 |

**尚未覆盖的关键风险点**:
1. 内存使用峰值监控（大图序列化）
2. 并发写入冲突处理机制
3. 文件系统满场景处理
4. 网络超时重试逻辑(GCS)
5. 二进制格式版本兼容性