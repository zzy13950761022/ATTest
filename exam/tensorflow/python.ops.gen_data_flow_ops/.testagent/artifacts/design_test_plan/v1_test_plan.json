{
  "plan_version": 2,
  "target": "tensorflow.python.ops.gen_data_flow_ops",
  "block_rules": {
    "header_block": "HEADER",
    "footer_block": "FOOTER",
    "case_prefix": "CASE_",
    "case_format": "CASE_01"
  },
  "iteration_strategy": {
    "round1": {
      "include": "SMOKE_SET",
      "assert_level": "weak",
      "max_blocks": 5
    },
    "roundN": {
      "only_fix_failed_blocks": true,
      "block_limit": 3,
      "promote_deferred": true
    },
    "final": {
      "enable_strong_asserts": true,
      "coverage_optional": true
    }
  },
  "test_files": {
    "default": "tests/test_tensorflow_python_ops_gen_data_flow_ops.py",
    "all_pattern": "tests/test_tensorflow_python_ops_gen_data_flow_ops.py"
  },
  "cases": [
    {
      "tc_id": "TC-01",
      "block_id": "CASE_01",
      "name": "FIFO队列创建入队出队完整流程",
      "priority": "High",
      "param_matrix": [
        {
          "queue_type": "FIFOQueue",
          "capacity": 10,
          "dtypes": ["float32"],
          "shapes": [[2, 2]],
          "container": "",
          "shared_name": "",
          "device": "cpu"
        }
      ],
      "asserts": {
        "weak": ["queue_created", "enqueue_success", "dequeue_shape", "dequeue_dtype", "queue_size_change"],
        "strong": ["queue_ordering_fifo", "capacity_limit", "resource_handle_valid", "session_isolation"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "M",
      "max_lines": 100,
      "max_params": 8,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.framework.ops.get_default_graph",
        "tensorflow.python.eager.context.executing_eagerly",
        "tensorflow.python.client.session.Session.run"
      ]
    },
    {
      "tc_id": "TC-02",
      "block_id": "CASE_02",
      "name": "张量数组动态读写和形状保持",
      "priority": "High",
      "param_matrix": [
        {
          "size": 5,
          "dtype": "float32",
          "element_shape": [3, 3],
          "dynamic_size": true,
          "clear_after_read": false,
          "device": "cpu"
        }
      ],
      "asserts": {
        "weak": ["tensor_array_created", "write_success", "read_shape", "read_dtype", "value_preserved"],
        "strong": ["dynamic_size_expansion", "index_boundary", "shape_inference", "consecutive_reads"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "M",
      "max_lines": 90,
      "max_params": 7,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.framework.ops.get_default_graph",
        "tensorflow.python.eager.context.executing_eagerly"
      ]
    },
    {
      "tc_id": "TC-03",
      "block_id": "CASE_03",
      "name": "动态分区与缝合的逆操作验证",
      "priority": "High",
      "param_matrix": [
        {
          "data_shape": [6, 4],
          "data_dtype": "float32",
          "num_partitions": 3,
          "device": "cpu"
        }
      ],
      "asserts": {
        "weak": ["partition_output_count", "stitch_output_shape", "data_type_preserved", "element_count_match"],
        "strong": ["data_integrity", "partition_consistency", "inverse_operation", "index_validation"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "M",
      "max_lines": 95,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.framework.ops.get_default_graph",
        "tensorflow.python.eager.context.executing_eagerly"
      ]
    },
    {
      "tc_id": "TC-04",
      "block_id": "CASE_04",
      "name": "屏障多生产者多消费者同步",
      "priority": "High",
      "param_matrix": [
        {
          "component_types": ["float32", "int32"],
          "shapes": [[2, 2], []],
          "capacity": 5,
          "container": "",
          "shared_name": "",
          "device": "cpu"
        }
      ],
      "asserts": {
        "weak": ["barrier_created", "insert_many_success", "take_many_success", "component_match", "capacity_check"],
        "strong": ["synchronization", "ordering_guarantee", "thread_safety", "resource_cleanup"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "L",
      "max_lines": 120,
      "max_params": 8,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.framework.ops.get_default_graph",
        "tensorflow.python.eager.context.executing_eagerly",
        "tensorflow.python.client.session.Session.run"
      ]
    },
    {
      "tc_id": "TC-05",
      "block_id": "CASE_05",
      "name": "累加器梯度应用和值更新",
      "priority": "High",
      "param_matrix": [
        {
          "dtype": "float32",
          "shape": [3, 3],
          "num_accumulated": 3,
          "device": "cpu"
        }
      ],
      "asserts": {
        "weak": ["accumulator_created", "apply_gradient_success", "value_updated", "shape_preserved", "dtype_preserved"],
        "strong": ["gradient_accumulation", "numerical_stability", "concurrent_updates", "reset_behavior"]
      },
      "oracle": "manual_verification",
      "assertion_level": "weak",
      "size": "M",
      "max_lines": 100,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.framework.ops.get_default_graph",
        "tensorflow.python.eager.context.executing_eagerly"
      ]
    }
  ],
  "param_extensions": [
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "queue_type": "PriorityQueue",
        "capacity": 20,
        "dtypes": ["int32", "float32"],
        "shapes": [[], [2, 2]],
        "container": "test_container",
        "shared_name": "test_shared",
        "device": "cpu"
      },
      "note": "PriorityQueue扩展测试，增加容器和共享名称"
    },
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "queue_type": "RandomShuffleQueue",
        "capacity": 15,
        "dtypes": ["float64"],
        "shapes": [[3, 3, 3]],
        "container": "",
        "shared_name": "",
        "device": "cpu"
      },
      "note": "RandomShuffleQueue扩展测试，不同dtype和形状"
    },
    {
      "base_block_id": "CASE_02",
      "priority": "Medium",
      "params": {
        "size": 0,
        "dtype": "int64",
        "element_shape": [],
        "dynamic_size": true,
        "clear_after_read": true,
        "device": "cpu"
      },
      "note": "零大小动态张量数组，标量元素，clear_after_read启用"
    },
    {
      "base_block_id": "CASE_03",
      "priority": "Medium",
      "params": {
        "data_shape": [10, 1],
        "data_dtype": "int32",
        "num_partitions": 2,
        "device": "cpu"
      },
      "note": "不同形状和dtype的动态分区缝合"
    },
    {
      "base_block_id": "CASE_04",
      "priority": "Medium",
      "params": {
        "component_types": ["string"],
        "shapes": [[]],
        "capacity": 10,
        "container": "barrier_container",
        "shared_name": "barrier_shared",
        "device": "cpu"
      },
      "note": "字符串类型屏障，不同容器和共享名称"
    }
  ],
  "smoke_set": ["CASE_01", "CASE_02", "CASE_03"],
  "deferred_set": ["CASE_04", "CASE_05"]
}