{
  "plan_version": 2,
  "target": "tensorflow.python.ops.summary_ops_v2",
  "block_rules": {
    "header_block": "HEADER",
    "footer_block": "FOOTER",
    "case_prefix": "CASE_",
    "case_format": "CASE_01"
  },
  "iteration_strategy": {
    "round1": {"include": "SMOKE_SET", "assert_level": "weak", "max_blocks": 5},
    "roundN": {"only_fix_failed_blocks": true, "block_limit": 3, "promote_deferred": true},
    "final": {"enable_strong_asserts": true, "coverage_optional": true}
  },
  "test_files": {
    "default": "tests/test_tensorflow_python_ops_summary_ops_v2.py",
    "all_pattern": "tests/test_tensorflow_python_ops_summary_ops_v2.py"
  },
  "cases": [
    {
      "tc_id": "TC-01",
      "block_id": "CASE_01",
      "name": "write函数基础功能验证",
      "priority": "High",
      "param_matrix": [
        {
          "tag": "test_scalar",
          "tensor_type": "scalar",
          "tensor_value": 1.5,
          "step": 0,
          "has_default_writer": true,
          "execution_mode": "eager"
        }
      ],
      "asserts": {
        "weak": ["返回值类型", "无异常抛出", "基础属性验证"],
        "strong": ["精确返回值", "状态更新验证", "设备放置验证"]
      },
      "oracle": "tensorflow.python.ops.summary_ops_v2.write",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 80,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_summary_ops.write_summary",
        "tensorflow.python.ops.smart_cond.smart_cond",
        "tensorflow.python.ops.summary_ops_v2._summary_state",
        "tensorflow.python.framework.ops.add_to_collection",
        "tensorflow.python.framework.ops.device"
      ]
    },
    {
      "tc_id": "TC-02",
      "block_id": "CASE_02",
      "name": "无默认写入器时的行为",
      "priority": "High",
      "param_matrix": [
        {
          "tag": "test_no_writer",
          "tensor_type": "scalar",
          "tensor_value": 2.0,
          "step": 1,
          "has_default_writer": false,
          "execution_mode": "eager"
        }
      ],
      "asserts": {
        "weak": ["返回值类型", "无异常抛出", "基础属性验证"],
        "strong": ["精确返回值False", "无状态更新", "无副作用"]
      },
      "oracle": "tensorflow.python.ops.summary_ops_v2.write",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 70,
      "max_params": 5,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.summary_ops_v2._summary_state",
        "tensorflow.python.ops.smart_cond.smart_cond"
      ]
    },
    {
      "tc_id": "TC-03",
      "block_id": "CASE_03",
      "name": "step为None且未设置全局步骤时的异常",
      "priority": "High",
      "param_matrix": [
        {
          "tag": "test_no_step",
          "tensor_type": "scalar",
          "tensor_value": 3.0,
          "step": null,
          "has_default_writer": true,
          "global_step_set": false,
          "execution_mode": "eager"
        }
      ],
      "asserts": {
        "weak": ["异常类型", "异常消息包含关键词", "基础验证"],
        "strong": ["精确异常消息", "异常触发条件", "状态回滚"]
      },
      "oracle": "tensorflow.python.ops.summary_ops_v2.write",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 75,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.summary_ops_v2._summary_state",
        "tensorflow.python.ops.smart_cond.smart_cond",
        "tensorflow.summary.experimental.get_step"
      ]
    },
    {
      "tc_id": "TC-04",
      "block_id": "CASE_04",
      "name": "tensor为可调用对象时的延迟执行",
      "priority": "High",
      "param_matrix": [
        {
          "tag": "test_callable",
          "tensor_type": "callable",
          "tensor_value": 4.5,
          "step": 2,
          "has_default_writer": true,
          "should_record": true,
          "execution_mode": "eager"
        }
      ],
      "asserts": {
        "weak": ["返回值类型", "无异常抛出", "基础属性验证"],
        "strong": ["可调用对象执行次数", "延迟执行验证", "条件执行逻辑"]
      },
      "oracle": "tensorflow.python.ops.summary_ops_v2.write",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 85,
      "max_params": 7,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_summary_ops.write_summary",
        "tensorflow.python.ops.smart_cond.smart_cond",
        "tensorflow.python.ops.summary_ops_v2._summary_state",
        "tensorflow.python.framework.ops.add_to_collection"
      ]
    },
    {
      "tc_id": "TC-05",
      "block_id": "CASE_05",
      "name": "设备强制设置为CPU验证",
      "priority": "High",
      "param_matrix": [
        {
          "tag": "test_device",
          "tensor_type": "scalar",
          "tensor_value": 5.0,
          "step": 3,
          "has_default_writer": true,
          "execution_mode": "graph"
        }
      ],
      "asserts": {
        "weak": ["无异常抛出", "基础属性验证", "设备上下文验证"],
        "strong": ["精确设备设置", "graph模式验证", "操作收集验证"]
      },
      "oracle": "tensorflow.python.ops.summary_ops_v2.write",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 80,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_summary_ops.write_summary",
        "tensorflow.python.ops.smart_cond.smart_cond",
        "tensorflow.python.ops.summary_ops_v2._summary_state",
        "tensorflow.python.framework.ops.add_to_collection",
        "tensorflow.python.framework.ops.device"
      ]
    }
  ],
  "param_extensions": [
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "tag": "test_image",
        "tensor_type": "image",
        "tensor_shape": [1, 28, 28, 3],
        "step": 10,
        "has_default_writer": true,
        "execution_mode": "eager"
      },
      "note": "图像摘要类型验证"
    },
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "tag": "test_histogram",
        "tensor_type": "histogram",
        "tensor_shape": [100],
        "step": 20,
        "has_default_writer": true,
        "execution_mode": "graph"
      },
      "note": "直方图摘要类型验证"
    },
    {
      "base_block_id": "CASE_02",
      "priority": "Medium",
      "params": {
        "tag": "test_no_writer_callable",
        "tensor_type": "callable",
        "tensor_value": 6.0,
        "step": 30,
        "has_default_writer": false,
        "execution_mode": "eager"
      },
      "note": "无写入器时callable不执行"
    },
    {
      "base_block_id": "CASE_03",
      "priority": "Medium",
      "params": {
        "tag": "test_no_step_graph",
        "tensor_type": "scalar",
        "tensor_value": 7.0,
        "step": null,
        "has_default_writer": true,
        "global_step_set": false,
        "execution_mode": "graph"
      },
      "note": "graph模式下step异常"
    },
    {
      "base_block_id": "CASE_04",
      "priority": "Medium",
      "params": {
        "tag": "test_callable_no_record",
        "tensor_type": "callable",
        "tensor_value": 8.0,
        "step": 40,
        "has_default_writer": true,
        "should_record": false,
        "execution_mode": "eager"
      },
      "note": "不记录时callable不执行"
    }
  ],
  "smoke_set": ["CASE_01", "CASE_02", "CASE_03"],
  "deferred_set": ["CASE_04", "CASE_05"]
}