=== Run Tests ===
FF.F.....ss                                                              [100%]
================================== FAILURES ===================================
________________ test_take_while_function_type_and_deprecation ________________

    def test_take_while_function_type_and_deprecation():
        """Test that take_while returns a callable function and triggers deprecation warning"""
        # Arrange
        predicate = lambda x: tf.constant(True)
    
        # Act - capture deprecation warning via warnings module
        with warnings.catch_warnings(record=True) as w:
            warnings.simplefilter("always", DeprecationWarning)
    
            # Call the function - deprecation warning should be triggered
            result = take_while(predicate)
    
            # Assert: deprecation warning was issued
            # TensorFlow's deprecation decorator uses warnings.warn
>           assert len(w) > 0, "At least one warning should be issued"
E           AssertionError: At least one warning should be issued
E           assert 0 > 0
E            +  where 0 = len([])

tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py:48: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  tensorflow:deprecation.py:337 From D:\Project\TestAgent-CLI-main\exam\tensorflow\python.data.experimental.ops.take_while_ops\tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py:44: take_while (from tensorflow.python.data.experimental.ops.take_while_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.take_while(...)
__________________ test_take_while_wraps_predicate_correctly __________________

    def test_take_while_wraps_predicate_correctly():
        """Test that the transformation function correctly wraps the predicate"""
        # Arrange
        mock_predicate = Mock(return_value=tf.constant(True))
        mock_dataset = Mock(spec=tf.data.Dataset)
        mock_dataset.take_while = Mock()
    
        # Act - capture deprecation warning
        with warnings.catch_warnings(record=True) as w:
            warnings.simplefilter("always", DeprecationWarning)
            transform_func = take_while(mock_predicate)
    
        # Assert: deprecation warning was issued
>       assert len(w) > 0, "Should issue deprecation warning"
E       AssertionError: Should issue deprecation warning
E       assert 0 > 0
E        +  where 0 = len([])

tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py:117: AssertionError
_________________ test_take_while_with_tensorflow_bool_scalar _________________

    def test_take_while_with_tensorflow_bool_scalar():
        """Test predicate returning scalar boolean tensor"""
        # Arrange: create dataset with tensor slices
        dataset = tf.data.Dataset.from_tensor_slices([[1, 2], [3, 4]])
    
        # Create predicate that returns scalar boolean tensor
        def tensor_bool_predicate(x):
            # x is a tensor of shape (2,)
            # Return scalar boolean based on sum
            sum_val = tf.reduce_sum(x)
            return tf.constant(sum_val < 5, dtype=tf.bool)  # Scalar boolean tensor
    
        # Act
        with warnings.catch_warnings():
            warnings.simplefilter("ignore", DeprecationWarning)
            transform_func = take_while(tensor_bool_predicate)
>           result_dataset = transform_func(dataset)

tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py:233: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\experimental\ops\take_while_ops.py:36: in _apply_fn
    return dataset.take_while(predicate=predicate)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\ops\dataset_ops.py:3118: in take_while
    return _TakeWhileDataset(self, predicate, name=name)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\ops\dataset_ops.py:5964: in __init__
    wrapped_func = structured_function.StructuredFunctionWrapper(
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\ops\structured_function.py:271: in __init__
    self._function = fn_factory()
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\eager\function.py:3070: in get_concrete_function
    graph_function = self._get_concrete_function_garbage_collected(
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\eager\function.py:3036: in _get_concrete_function_garbage_collected
    graph_function, _ = self._maybe_define_function(args, kwargs)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\eager\function.py:3292: in _maybe_define_function
    graph_function = self._create_graph_function(args, kwargs)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\eager\function.py:3130: in _create_graph_function
    func_graph_module.func_graph_from_py_func(
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\framework\func_graph.py:1161: in func_graph_from_py_func
    func_outputs = python_func(*func_args, **func_kwargs)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\ops\structured_function.py:248: in wrapped_fn
    ret = wrapper_helper(*args)
D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\data\ops\structured_function.py:177: in wrapper_helper
    ret = autograph.tf_convert(self._func, ag_ctx)(*nested_args)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

args = (<tf.Tensor 'args_0:0' shape=(2,) dtype=int32>,), kwargs = {}
options = <tensorflow.python.autograph.core.converter.ConversionOptions object at 0x000002A2060A2B20>

    def wrapper(*args, **kwargs):
      """Wrapper that calls the converted version of f."""
      options = converter.ConversionOptions(
          recursive=recursive,
          user_requested=user_requested,
          optional_features=optional_features)
      try:
        with conversion_ctx:
          return converted_call(f, args, kwargs, options=options)
      except Exception as e:  # pylint:disable=broad-except
        if hasattr(e, 'ag_error_metadata'):
>         raise e.ag_error_metadata.to_exception(e)
E         TypeError: in user code:
E         
E             File "D:\Project\TestAgent-CLI-main\exam\tensorflow\python.data.experimental.ops.take_while_ops\tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py", line 227, in tensor_bool_predicate  *
E                 return tf.constant(sum_val < 5, dtype=tf.bool)  # Scalar boolean tensor
E         
E             TypeError: Expected bool, but got Tensor("Less:0", shape=(), dtype=bool) of type 'Tensor'.

D:\Coding\Anaconda\envs\testagent-experiment\lib\site-packages\tensorflow\python\autograph\impl\api.py:692: TypeError

---------- coverage: platform win32, python 3.9.25-final-0 -----------
Name                                                                   Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------------------------------------------------------------
run_test.py                                                                8      8      0      0     0%   1-11
run_verify.py                                                             10     10      2      0     0%   1-13
test_actual_behavior.py                                                    0      0      0      0   100%
test_error_timing.py                                                       0      0      0      0   100%
tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py     185     97      6      2    48%   22, 26-28, 51-56, 64-98, 118-176, 192-193, 226-227, 244-275, 309-310, 335, 338-340, 375, 406
verify_fix.py                                                             33     33      6      0     0%   1-49
------------------------------------------------------------------------------------------------------------------
TOTAL                                                                    236    148     14      2    37%
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py::test_take_while_function_type_and_deprecation
FAILED tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py::test_take_while_wraps_predicate_correctly
FAILED tests\test_tensorflow_python_data_experimental_ops_take_while_ops.py::test_take_while_with_tensorflow_bool_scalar
3 failed, 6 passed, 2 skipped in 2.47s

Error: exit 1