{
  "plan_version": 2,
  "target": "tensorflow.python.ops.candidate_sampling_ops",
  "block_rules": {
    "header_block": "HEADER",
    "footer_block": "FOOTER",
    "case_prefix": "CASE_",
    "case_format": "CASE_01"
  },
  "iteration_strategy": {
    "round1": {"include": "SMOKE_SET", "assert_level": "weak", "max_blocks": 5},
    "roundN": {"only_fix_failed_blocks": true, "block_limit": 3, "promote_deferred": true},
    "final": {"enable_strong_asserts": true, "coverage_optional": true}
  },
  "test_files": {
    "single": "tests/test_tensorflow_python_ops_candidate_sampling_ops.py",
    "default": "tests/test_tensorflow_python_ops_candidate_sampling_ops.py",
    "all_pattern": "tests/test_tensorflow_python_ops_candidate_sampling_ops_*.py"
  },
  "cases": [
    {
      "tc_id": "TC-01",
      "block_id": "CASE_01",
      "name": "uniform_candidate_sampler基础功能",
      "priority": "High",
      "param_matrix": [
        {
          "true_classes_shape": [2, 3],
          "num_true": 3,
          "num_sampled": 5,
          "range_max": 10,
          "unique": false,
          "seed": 42
        }
      ],
      "asserts": {
        "weak": ["output_shape", "dtype_check", "value_range"],
        "strong": ["distribution_uniformity", "expected_count_accuracy"]
      },
      "oracle": "tensorflow.python.ops.candidate_sampling_ops.uniform_candidate_sampler",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 80,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_candidate_sampling_ops.uniform_candidate_sampler",
        "tensorflow.python.framework.random_seed.get_seed"
      ]
    },
    {
      "tc_id": "TC-02",
      "block_id": "CASE_02",
      "name": "unique=True约束验证",
      "priority": "High",
      "param_matrix": [
        {
          "true_classes_shape": [1, 2],
          "num_true": 2,
          "num_sampled": 3,
          "range_max": 5,
          "unique": true,
          "seed": 123
        }
      ],
      "asserts": {
        "weak": ["unique_constraint", "output_shape", "dtype_check"],
        "strong": ["sampled_uniqueness", "distribution_property"]
      },
      "oracle": "tensorflow.python.ops.candidate_sampling_ops.uniform_candidate_sampler",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 70,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_candidate_sampling_ops.uniform_candidate_sampler",
        "tensorflow.python.framework.random_seed.get_seed"
      ]
    },
    {
      "tc_id": "TC-03",
      "block_id": "CASE_03",
      "name": "compute_accidental_hits基础功能",
      "priority": "High",
      "param_matrix": [
        {
          "true_classes_shape": [3, 2],
          "sampled_candidates_shape": [4],
          "num_true": 2,
          "seed": 456
        }
      ],
      "asserts": {
        "weak": ["output_shape", "dtype_check", "indices_range"],
        "strong": ["accidental_hits_accuracy", "weights_calculation"]
      },
      "oracle": "tensorflow.python.ops.candidate_sampling_ops.compute_accidental_hits",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 75,
      "max_params": 5,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_candidate_sampling_ops.compute_accidental_hits"
      ]
    },
    {
      "tc_id": "TC-04",
      "block_id": "CASE_04",
      "name": "log_uniform_candidate_sampler分布验证",
      "priority": "High",
      "param_matrix": [
        {
          "true_classes_shape": [2, 1],
          "num_true": 1,
          "num_sampled": 4,
          "range_max": 8,
          "unique": false,
          "seed": 789
        }
      ],
      "asserts": {
        "weak": ["output_shape", "dtype_check", "value_range"],
        "strong": ["log_uniform_distribution", "expected_count_consistency"]
      },
      "oracle": "tensorflow.python.ops.candidate_sampling_ops.log_uniform_candidate_sampler",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 80,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_candidate_sampling_ops.log_uniform_candidate_sampler",
        "tensorflow.python.framework.random_seed.get_seed"
      ]
    },
    {
      "tc_id": "TC-05",
      "block_id": "CASE_05",
      "name": "all_candidate_sampler全类别采样",
      "priority": "High",
      "param_matrix": [
        {
          "true_classes_shape": [1, 3],
          "num_true": 3,
          "num_sampled": 6,
          "range_max": 6,
          "unique": true,
          "seed": 321
        }
      ],
      "asserts": {
        "weak": ["output_shape", "dtype_check", "complete_coverage"],
        "strong": ["all_candidates_present", "expected_count_validation"]
      },
      "oracle": "tensorflow.python.ops.candidate_sampling_ops.all_candidate_sampler",
      "assertion_level": "weak",
      "size": "S",
      "max_lines": 70,
      "max_params": 6,
      "is_parametrized": true,
      "requires_mock": true,
      "mock_targets": [
        "tensorflow.python.ops.gen_candidate_sampling_ops.all_candidate_sampler",
        "tensorflow.python.framework.random_seed.get_seed"
      ]
    }
  ],
  "param_extensions": [
    {
      "base_block_id": "CASE_01",
      "priority": "Medium",
      "params": {
        "true_classes_shape": [4, 2],
        "num_true": 2,
        "num_sampled": 8,
        "range_max": 20,
        "unique": false,
        "seed": 999
      },
      "note": "扩展batch_size和range_max"
    },
    {
      "base_block_id": "CASE_02",
      "priority": "Medium",
      "params": {
        "true_classes_shape": [2, 1],
        "num_true": 1,
        "num_sampled": 4,
        "range_max": 4,
        "unique": true,
        "seed": 777
      },
      "note": "扩展num_sampled等于range_max边界"
    },
    {
      "base_block_id": "CASE_03",
      "priority": "Medium",
      "params": {
        "true_classes_shape": [1, 5],
        "sampled_candidates_shape": [10],
        "num_true": 5,
        "seed": 555
      },
      "note": "扩展num_true和sampled_candidates大小"
    }
  ],
  "smoke_set": ["CASE_01", "CASE_02", "CASE_03"],
  "deferred_set": ["CASE_04", "CASE_05"]
}