{
  "workflow_id": "d4291f00",
  "created_at": "2026-01-26T18:15:49.354707",
  "op": "tensorflow_python_training_input",
  "arch": "python",
  "soc": "python",
  "vendor": "python",
  "project_root": "/Users/zzf1sh/Documents/Project/TestAgent-CLI-main/exam/tensorflow/python.training.input",
  "target": "tensorflow.python.training.input",
  "target_slug": "tensorflow_python_training_input",
  "current_stage": "complete",
  "stage_index": 6,
  "mode": "full-auto",
  "epoch_total": 5,
  "epoch_current": 5,
  "last_failure_signature": "",
  "last_error_signature": "",
  "last_block_errors": {},
  "auto_stop_reason": "",
  "artifacts": {
    "function_doc.md": "# tensorflow.python.training.input - 函数说明\n\n## 1. 基本信息\n- **FQN**: tensorflow.python.training.input\n- **模块文件**: `/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py`\n- **签名**: 模块（包含多个函数）\n- **对象类型**: module\n\n## 2. 功能概述\nTensorFlow 输入管道模块，提供基于队列的批量数据处理功能。主要用于构建训练数据输入管道，支持文件匹配、批量处理、随机打乱等操作。所有函数已被标记为弃用，推荐使用 `tf.data` API 替代。\n\n## 3. 参数说明\n模块包含多个函数，主要参数类型：\n- `tensors`/`tensor_list`: Tensor 列表或字典，输入数据\n- `batch_size`: 整数，批量大小\n- `capacity`: 整数，队列容量\n- `num_epochs`: 整数，迭代次数限制\n- `shuffle`: 布尔值，是否随机打乱\n- `seed`: 整数，随机种子\n- `enqueue_many`: 布尔值，是否批量入队\n- `dynamic_pad`: 布尔值，是否动态填充\n- `allow_smaller_final_batch`: 布尔值，是否允许更小的最终批次\n\n## 4. 返回值\n各函数返回类型不同：\n- 队列操作函数返回 Queue 对象\n- 批量处理函数返回 Tensor 列表/字典\n- 文件匹配函数返回 Variable 对象\n\n## 5. 文档要点\n- 所有函数已弃用，推荐使用 `tf.data` API\n- 不支持 eager execution 模式\n- 需要手动初始化局部变量（如 `local_variables_initializer()`）\n- 使用队列机制，可能抛出 `OutOfRangeError`\n- 需要确保形状推断或显式指定 shapes 参数\n\n## 6. 源码摘要\n- 核心函数：`batch`, `batch_join`, `shuffle_batch`, `shuffle_batch_join`\n- 辅助函数：`input_producer`, `string_input_producer`, `slice_input_producer`\n- 依赖：`data_flow_ops.FIFOQueue`, `data_flow_ops.RandomShuffleQueue`\n- 副作用：创建队列运行器，添加到 `QUEUE_RUNNER` 集合\n- 稀疏张量支持：通过 `_store_sparse_tensors` 和 `_restore_sparse_tensors`\n\n## 7. 示例与用法（如有）\n```python\n# 创建图像和标签的批量\nimage_batch, label_batch = tf.compat.v1.train.shuffle_batch(\n    [single_image, single_label],\n    batch_size=32,\n    capacity=50000,\n    min_after_dequeue=10000)\n```\n\n## 8. 风险与空白\n- 目标为模块而非单个函数，包含多个实体\n- 所有函数已弃用，测试需考虑兼容性\n- 缺少 eager execution 支持\n- 需要手动变量初始化\n- 队列机制可能引发死锁或资源泄漏\n- 形状推断可能失败，需要显式 shapes 参数\n- 稀疏张量处理逻辑复杂，边界情况多\n- 多线程并发可能引入竞态条件",
    "requirements.md": "# tensorflow.python.training.input 测试需求\n\n## 1. 目标与范围\n- 主要功能与期望行为：验证基于队列的批量数据处理功能，包括文件匹配、批量处理、随机打乱等操作的正确性\n- 不在范围内的内容：`tf.data` API 替代方案、eager execution 模式、分布式训练场景\n\n## 2. 输入与约束\n- 参数列表（名称、类型/shape、默认值）：\n  - `tensors`/`tensor_list`: Tensor 列表或字典，无默认值\n  - `batch_size`: 整数 > 0，无默认值\n  - `capacity`: 整数 ≥ batch_size，默认值：32\n  - `num_epochs`: 整数 ≥ 1，默认值：None（无限）\n  - `shuffle`: 布尔值，默认值：False\n  - `seed`: 整数，默认值：None\n  - `enqueue_many`: 布尔值，默认值：False\n  - `dynamic_pad`: 布尔值，默认值：False\n  - `allow_smaller_final_batch`: 布尔值，默认值：False\n  - `min_after_dequeue`: 整数 ≥ 0，默认值：capacity // 4\n\n- 有效取值范围/维度/设备要求：\n  - batch_size 必须为正整数\n  - capacity 必须 ≥ batch_size\n  - min_after_dequeue 必须 ≤ capacity\n  - 张量形状必须一致或兼容动态填充\n  - 仅支持 graph execution 模式\n\n- 必需与可选组合：\n  - `tensors` 和 `batch_size` 为必需参数\n  - `shuffle=True` 时建议设置 `seed` 保证可重现性\n  - `dynamic_pad=True` 时张量形状可以不同\n\n- 随机性/全局状态要求：\n  - 使用 `seed` 参数控制随机性\n  - 需要手动调用 `local_variables_initializer()`\n  - 队列运行器添加到全局 `QUEUE_RUNNER` 集合\n\n## 3. 输出与判定\n- 期望返回结构及关键字段：\n  - 批量函数返回 Tensor 列表或字典，形状为 [batch_size, ...]\n  - 输入生产者函数返回 Queue 对象\n  - 稀疏张量保持稀疏格式\n\n- 容差/误差界（如浮点）：\n  - 浮点数值误差在 1e-6 范围内\n  - 批量顺序在 shuffle=False 时保持原序\n  - 批量大小误差为 0（除非 allow_smaller_final_batch=True）\n\n- 状态变化或副作用检查点：\n  - 验证队列运行器正确添加到 `QUEUE_RUNNER`\n  - 检查局部变量正确初始化\n  - 确认无资源泄漏（队列关闭）\n\n## 4. 错误与异常场景\n- 非法输入/维度/类型触发的异常或警告：\n  - batch_size ≤ 0 触发 ValueError\n  - capacity < batch_size 触发 ValueError\n  - 非张量输入触发 TypeError\n  - 形状不兼容触发 ValueError\n  - 弃用警告必须触发\n\n- 边界值（空、None、0 长度、极端形状/数值）：\n  - 空张量列表触发 ValueError\n  - None 输入触发 TypeError\n  - 极端 batch_size（如 1, 1000000）验证性能\n  - 零维张量处理\n  - 超大容量队列内存检查\n\n## 5. 依赖与环境\n- 外部资源/设备/网络/文件依赖：\n  - 文件系统访问（string_input_producer）\n  - 线程池资源\n  - TensorFlow graph execution 环境\n\n- 需要 mock/monkeypatch 的部分：\n  - `tensorflow.python.training.queue_runner.QueueRunner`\n  - `tensorflow.python.ops.data_flow_ops.FIFOQueue`\n  - `tensorflow.python.ops.data_flow_ops.RandomShuffleQueue`\n  - `tensorflow.python.training.queue_runner.add_queue_runner`\n  - `warnings.warn`（弃用警告捕获）\n\n## 6. 覆盖与优先级\n- 必测路径（高优先级，最多 5 条，短句）：\n  1. 基本批量处理功能验证（shuffle=False）\n  2. 随机打乱批量验证（shuffle=True，固定 seed）\n  3. 动态填充功能测试（dynamic_pad=True）\n  4. 稀疏张量正确处理\n  5. 文件输入生产者基础功能\n\n- 可选路径（中/低优先级合并为一组列表）：\n  - 多队列批量处理（batch_join）\n  - 随机打乱多队列（shuffle_batch_join）\n  - 切片输入生产者（slice_input_producer）\n  - 允许更小最终批次（allow_smaller_final_batch=True）\n  - 多 epoch 处理验证\n  - 大容量队列性能测试\n  - 形状推断失败场景\n  - 队列关闭和资源清理\n\n- 已知风险/缺失信息（仅列条目，不展开）：\n  - 所有函数已弃用\n  - 不支持 eager execution\n  - 需要手动变量初始化\n  - 队列机制可能死锁\n  - 多线程竞态条件\n  - 形状推断边界情况\n  - 稀疏张量复杂处理",
    "test_plan.json": "{\n  \"plan_version\": 2,\n  \"target\": \"tensorflow.python.training.input\",\n  \"block_rules\": {\n    \"header_block\": \"HEADER\",\n    \"footer_block\": \"FOOTER\",\n    \"case_prefix\": \"CASE_\",\n    \"case_format\": \"CASE_01\"\n  },\n  \"iteration_strategy\": {\n    \"round1\": {\n      \"include\": \"SMOKE_SET\",\n      \"assert_level\": \"weak\",\n      \"max_blocks\": 5\n    },\n    \"roundN\": {\n      \"only_fix_failed_blocks\": true,\n      \"block_limit\": 3,\n      \"promote_deferred\": true\n    },\n    \"final\": {\n      \"enable_strong_asserts\": true,\n      \"coverage_optional\": true\n    }\n  },\n  \"test_files\": {\n    \"default\": \"tests/test_tensorflow_python_training_input.py\",\n    \"all_pattern\": \"tests/test_tensorflow_python_training_input.py\"\n  },\n  \"cases\": [\n    {\n      \"tc_id\": \"TC-01\",\n      \"block_id\": \"CASE_01\",\n      \"name\": \"基本批量处理功能验证\",\n      \"priority\": \"High\",\n      \"param_matrix\": [\n        {\n          \"function\": \"batch\",\n          \"tensors\": \"simple_tensor_list\",\n          \"batch_size\": 2,\n          \"capacity\": 32,\n          \"shuffle\": false,\n          \"enqueue_many\": false,\n          \"dynamic_pad\": false,\n          \"allow_smaller_final_batch\": false\n        }\n      ],\n      \"asserts\": {\n        \"weak\": [\"deprecation_warning\", \"output_shape\", \"batch_size_correct\", \"queue_runner_added\"],\n        \"strong\": [\"exact_values_match\", \"no_data_loss\", \"deterministic_order\"]\n      },\n      \"oracle\": \"manual_verification\",\n      \"assertion_level\": \"weak\",\n      \"size\": \"S\",\n      \"max_lines\": 80,\n      \"max_params\": 8,\n      \"is_parametrized\": true,\n      \"requires_mock\": true,\n      \"mock_targets\": [\n        \"tensorflow.python.training.queue_runner.QueueRunner\",\n        \"tensorflow.python.ops.data_flow_ops.FIFOQueue\",\n        \"tensorflow.python.training.queue_runner.add_queue_runner\",\n        \"warnings.warn\"\n      ]\n    },\n    {\n      \"tc_id\": \"TC-02\",\n      \"block_id\": \"CASE_02\",\n      \"name\": \"随机打乱批量验证\",\n      \"priority\": \"High\",\n      \"param_matrix\": [\n        {\n          \"function\": \"shuffle_batch\",\n          \"tensors\": \"simple_tensor_list\",\n          \"batch_size\": 2,\n          \"capacity\": 32,\n          \"min_after_dequeue\": 8,\n          \"seed\": 42,\n          \"enqueue_many\": false,\n          \"dynamic_pad\": false,\n          \"allow_smaller_final_batch\": false\n        }\n      ],\n      \"asserts\": {\n        \"weak\": [\"deprecation_warning\", \"output_shape\", \"batch_size_correct\", \"queue_runner_added\", \"random_shuffle_queue_used\"],\n        \"strong\": [\"shuffled_order\", \"seed_reproducibility\", \"no_duplicate_data\"]\n      },\n      \"oracle\": \"manual_verification\",\n      \"assertion_level\": \"weak\",\n      \"size\": \"S\",\n      \"max_lines\": 80,\n      \"max_params\": 9,\n      \"is_parametrized\": true,\n      \"requires_mock\": true,\n      \"mock_targets\": [\n        \"tensorflow.python.training.queue_runner.QueueRunner\",\n        \"tensorflow.python.ops.data_flow_ops.RandomShuffleQueue\",\n        \"tensorflow.python.training.queue_runner.add_queue_runner\",\n        \"warnings.warn\"\n      ]\n    },\n    {\n      \"tc_id\": \"TC-03\",\n      \"block_id\": \"CASE_03\",\n      \"name\": \"动态填充功能测试\",\n      \"priority\": \"High\",\n      \"param_matrix\": [\n        {\n          \"function\": \"batch\",\n          \"tensors\": \"variable_length_tensors\",\n          \"batch_size\": 2,\n          \"capacity\": 32,\n          \"shuffle\": false,\n          \"enqueue_many\": false,\n          \"dynamic_pad\": true,\n          \"allow_smaller_final_batch\": false\n        }\n      ],\n      \"asserts\": {\n        \"weak\": [\"deprecation_warning\", \"output_shape\", \"batch_size_correct\", \"queue_runner_added\", \"padding_applied\"],\n        \"strong\": [\"correct_padding_values\", \"no_data_corruption\", \"consistent_padding\"]\n      },\n      \"oracle\": \"manual_verification\",\n      \"assertion_level\": \"weak\",\n      \"size\": \"S\",\n      \"max_lines\": 80,\n      \"max_params\": 8,\n      \"is_parametrized\": true,\n      \"requires_mock\": true,\n      \"mock_targets\": [\n        \"tensorflow.python.training.queue_runner.QueueRunner\",\n        \"tensorflow.python.ops.data_flow_ops.FIFOQueue\",\n        \"tensorflow.python.training.queue_runner.add_queue_runner\",\n        \"warnings.warn\"\n      ]\n    },\n    {\n      \"tc_id\": \"TC-04\",\n      \"block_id\": \"CASE_04\",\n      \"name\": \"稀疏张量正确处理\",\n      \"priority\": \"High\",\n      \"param_matrix\": [\n        {\n          \"function\": \"batch\",\n          \"tensors\": \"sparse_tensor_list\",\n          \"batch_size\": 2,\n          \"capacity\": 32,\n          \"shuffle\": false,\n          \"enqueue_many\": false,\n          \"dynamic_pad\": false,\n          \"allow_smaller_final_batch\": false\n        }\n      ],\n      \"asserts\": {\n        \"weak\": [\"deprecation_warning\", \"output_shape\", \"batch_size_correct\", \"queue_runner_added\", \"sparse_format_preserved\"],\n        \"strong\": [\"sparse_values_correct\", \"indices_correct\", \"dense_shape_correct\"]\n      },\n      \"oracle\": \"manual_verification\",\n      \"assertion_level\": \"weak\",\n      \"size\": \"M\",\n      \"max_lines\": 100,\n      \"max_params\": 8,\n      \"is_parametrized\": true,\n      \"requires_mock\": true,\n      \"mock_targets\": [\n        \"tensorflow.python.training.queue_runner.QueueRunner\",\n        \"tensorflow.python.ops.data_flow_ops.FIFOQueue\",\n        \"tensorflow.python.training.queue_runner.add_queue_runner\",\n        \"warnings.warn\"\n      ]\n    },\n    {\n      \"tc_id\": \"TC-05\",\n      \"block_id\": \"CASE_05\",\n      \"name\": \"文件输入生产者基础功能\",\n      \"priority\": \"High\",\n      \"param_matrix\": [\n        {\n          \"function\": \"string_input_producer\",\n          \"file_list\": \"mock_file_list\",\n          \"shuffle\": false,\n          \"seed\": null,\n          \"capacity\": 32\n        }\n      ],\n      \"asserts\": {\n        \"weak\": [\"deprecation_warning\", \"queue_object_returned\", \"queue_runner_added\", \"capacity_set\"],\n        \"strong\": [\"file_order_correct\", \"no_duplicate_files\", \"queue_operations_correct\"]\n      },\n      \"oracle\": \"manual_verification\",\n      \"assertion_level\": \"weak\",\n      \"size\": \"S\",\n      \"max_lines\": 80,\n      \"max_params\": 5,\n      \"is_parametrized\": true,\n      \"requires_mock\": true,\n      \"mock_targets\": [\n        \"tensorflow.python.training.queue_runner.QueueRunner\",\n        \"tensorflow.python.ops.data_flow_ops.FIFOQueue\",\n        \"tensorflow.python.training.queue_runner.add_queue_runner\",\n        \"warnings.warn\"\n      ]\n    }\n  ],\n  \"param_extensions\": [\n    {\n      \"base_block_id\": \"CASE_01\",\n      \"priority\": \"Medium\",\n      \"params\": {\n        \"function\": \"batch\",\n        \"tensors\": \"simple_tensor_list\",\n        \"batch_size\": 4,\n        \"capacity\": 64,\n        \"shuffle\": false,\n        \"enqueue_many\": true,\n        \"dynamic_pad\": false,\n        \"allow_smaller_final_batch\": false\n      },\n      \"note\": \"批量入队模式测试\"\n    },\n    {\n      \"base_block_id\": \"CASE_01\",\n      \"priority\": \"Medium\",\n      \"params\": {\n        \"function\": \"batch\",\n        \"tensors\": \"simple_tensor_list\",\n        \"batch_size\": 1,\n        \"capacity\": 10,\n        \"shuffle\": false,\n        \"enqueue_many\": false,\n        \"dynamic_pad\": false,\n        \"allow_smaller_final_batch\": true\n      },\n      \"note\": \"允许更小最终批次测试\"\n    },\n    {\n      \"base_block_id\": \"CASE_02\",\n      \"priority\": \"Medium\",\n      \"params\": {\n        \"function\": \"shuffle_batch\",\n        \"tensors\": \"simple_tensor_list\",\n        \"batch_size\": 2,\n        \"capacity\": 32,\n        \"min_after_dequeue\": 16,\n        \"seed\": 123,\n        \"enqueue_many\": false,\n        \"dynamic_pad\": false,\n        \"allow_smaller_final_batch\": false\n      },\n      \"note\": \"不同随机种子和队列参数\"\n    },\n    {\n      \"base_block_id\": \"CASE_03\",\n      \"priority\": \"Medium\",\n      \"params\": {\n        \"function\": \"batch\",\n        \"tensors\": \"variable_length_tensors\",\n        \"batch_size\": 3,\n        \"capacity\": 48,\n        \"shuffle\": false,\n        \"enqueue_many\": false,\n        \"dynamic_pad\": true,\n        \"allow_smaller_final_batch\": true\n      },\n      \"note\": \"动态填充与更小批次组合\"\n    },\n    {\n      \"base_block_id\": \"CASE_04\",\n      \"priority\": \"Medium\",\n      \"params\": {\n        \"function\": \"batch\",\n        \"tensors\": \"sparse_tensor_list\",\n        \"batch_size\": 3,\n        \"capacity\": 48,\n        \"shuffle\": true,\n        \"seed\": 42,\n        \"enqueue_many\": false,\n        \"dynamic_pad\": false,\n        \"allow_smaller_final_batch\": false\n      },\n      \"note\": \"稀疏张量随机打乱测试\"\n    }\n  ],\n  \"smoke_set\": [\"CASE_01\", \"CASE_02\", \"CASE_03\"],\n  \"deferred_set\": [\"CASE_04\", \"CASE_05\"]\n}",
    "test_plan.md": "# tensorflow.python.training.input 测试计划\n\n## 1. 测试策略\n- 单元测试框架：pytest\n- 隔离策略：mock/monkeypatch/fixtures（队列运行器、队列对象、警告）\n- 随机性处理：固定随机种子/控制 RNG（seed 参数）\n- 执行模式：仅支持 graph execution 模式\n- 弃用处理：捕获并验证弃用警告\n\n## 2. 生成规格摘要（来自 test_plan.json）\n- **SMOKE_SET**: CASE_01（基本批量处理）、CASE_02（随机打乱批量）、CASE_03（动态填充）\n- **DEFERRED_SET**: CASE_04（稀疏张量）、CASE_05（文件输入生产者）\n- **测试文件路径**: tests/test_tensorflow_python_training_input.py（单文件）\n- **断言分级策略**: 首轮使用 weak 断言，最终轮启用 strong 断言\n- **预算策略**: \n  - Size: S（80行以内）/M（100行以内）\n  - max_params: 5-9个参数\n  - 所有用例参数化设计\n\n## 3. 数据与边界\n- **正常数据集**: 简单张量列表、变长张量、稀疏张量、模拟文件列表\n- **随机生成策略**: 固定 seed 保证可重现性\n- **边界值**: \n  - batch_size=1（最小批量）\n  - capacity=batch_size（最小容量）\n  - min_after_dequeue=0（最小出队后数量）\n  - 零维张量处理\n- **极端形状**: 超大容量队列（性能测试）\n- **空输入**: 空张量列表触发 ValueError\n- **负例与异常场景**:\n  - batch_size ≤ 0 触发 ValueError\n  - capacity < batch_size 触发 ValueError\n  - 非张量输入触发 TypeError\n  - 形状不兼容触发 ValueError\n  - 弃用警告必须触发\n\n## 4. 覆盖映射\n| TC ID | 对应需求/约束 | 优先级 | 覆盖功能点 |\n|-------|--------------|--------|------------|\n| TC-01 | 基本批量处理功能验证 | High | batch() 基础功能，队列运行器添加 |\n| TC-02 | 随机打乱批量验证 | High | shuffle_batch()，随机种子控制 |\n| TC-03 | 动态填充功能测试 | High | dynamic_pad=True，变长张量处理 |\n| TC-04 | 稀疏张量正确处理 | High | 稀疏张量格式保持 |\n| TC-05 | 文件输入生产者基础功能 | High | string_input_producer() 基础功能 |\n\n**尚未覆盖的风险点**:\n- 多队列批量处理（batch_join/shuffle_batch_join）\n- 切片输入生产者（slice_input_producer）\n- 多 epoch 处理验证\n- 队列关闭和资源清理\n- 多线程竞态条件\n- 形状推断边界情况\n- 大容量队列性能测试\n\n## 5. Mock 策略\n- **必需 Mock 目标**:\n  - tensorflow.python.training.queue_runner.QueueRunner\n  - tensorflow.python.ops.data_flow_ops.FIFOQueue\n  - tensorflow.python.ops.data_flow_ops.RandomShuffleQueue\n  - tensorflow.python.training.queue_runner.add_queue_runner\n  - warnings.warn（弃用警告捕获）\n\n- **Mock 验证点**:\n  - 队列运行器正确创建和添加\n  - 队列类型正确选择（FIFO/RandomShuffle）\n  - 弃用警告正确触发\n  - 局部变量初始化调用\n\n## 6. 迭代策略\n- **首轮（round1）**: 仅生成 SMOKE_SET（3个用例），使用 weak 断言\n- **后续轮（roundN）**: 修复失败用例，从 DEFERRED_SET 提升用例\n- **最终轮（final）**: 启用 strong 断言，可选覆盖率检查",
    "tests/test_tensorflow_python_training_input.py": "\"\"\"\nTest cases for tensorflow.python.training.input module.\nThis module contains deprecated queue-based input pipeline functions.\n\"\"\"\n\nimport warnings\nimport pytest\nimport numpy as np\nimport tensorflow as tf\nfrom unittest import mock\n\n# Import the target functions\nfrom tensorflow.python.training.input import batch\nfrom tensorflow.python.training.input import shuffle_batch\nfrom tensorflow.python.training.input import string_input_producer\n\n# ===== BLOCK:HEADER START =====\n# Test fixtures and helper functions\n# ===== BLOCK:HEADER END =====\n\n# ===== BLOCK:CASE_01 START =====\n# Test case for basic batch functionality\n# ===== BLOCK:CASE_01 END =====\n\n# ===== BLOCK:CASE_02 START =====\n# Test case for shuffle batch functionality\n# ===== BLOCK:CASE_02 END =====\n\n# ===== BLOCK:CASE_03 START =====\n# Test case for dynamic padding functionality\n# ===== BLOCK:CASE_03 END =====\n\n# ===== BLOCK:CASE_04 START =====\n# Test case for sparse tensor handling (deferred)\n# ===== BLOCK:CASE_04 END =====\n\n# ===== BLOCK:CASE_05 START =====\n# Test case for file input producer (deferred)\n# ===== BLOCK:CASE_05 END =====\n\n# ===== BLOCK:FOOTER START =====\n# Additional test cases and cleanup\n# ===== BLOCK:FOOTER END =====",
    "execution_log.txt": "=== Run Tests ===\nFFF...FFFF.FFFF..........F...                                            [100%]\n=================================== FAILURES ===================================\n_________ TestBatchFunction.test_batch_basic_functionality[2-32-False] _________\n\nself = <test_tensorflow_python_training_input.TestBatchFunction object at 0x15ad4e3b0>\nbatch_size = 2, capacity = 32, enqueue_many = False\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5819620928'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5819628944'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5819629088'>\nmock_warnings = <MagicMock name='warn' id='5819653504'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,enqueue_many\", [\n        (2, 32, False),  # Basic case from test plan\n        (4, 64, True),   # Parameter extension: batch enqueue mode\n        (1, 10, False),  # Parameter extension: allow smaller final batch\n    ])\n    def test_batch_basic_functionality(\n        self,\n        batch_size,\n        capacity,\n        enqueue_many,\n        simple_tensor_list,\n        mock_queue_runner,\n        mock_fifo_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test basic batch functionality with various parameters.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_fifo_queue\n        mock_dequeue_op = mock.Mock()\n        # Create mock output tensors with correct shape\n        mock_output1 = mock.Mock()\n        mock_output1.shape = tf.TensorShape([batch_size, 2, 3])\n        mock_output2 = mock.Mock()\n        mock_output2.shape = tf.TensorShape([batch_size, 2, 3])\n    \n        # Return mock tensors instead of real tensors\n        mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n        # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n        mock_size_tensor = mock.Mock()\n        mock_size_tensor.__sub__ = lambda self, other: mock.Mock()  # Allow subtraction\n        mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()  # Allow reverse subtraction\n        mock_queue.size.return_value = mock_size_tensor\n    \n        # Call the batch function\n        with tf.Graph().as_default():\n            # Prepare input tensors\n            if enqueue_many:\n                # For enqueue_many=True, we need to add a batch dimension\n                input_tensors = [\n                    tf.expand_dims(tensor, 0) for tensor in simple_tensor_list\n                ]\n            else:\n                input_tensors = simple_tensor_list\n    \n            # Call the function\n>           output_tensors = batch(\n                tensors=input_tensors,\n                batch_size=batch_size,\n                capacity=capacity,\n                enqueue_many=enqueue_many,\n                dynamic_pad=False,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:170: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1006: in batch\n    return _batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:781: in _batch\n    math_ops.cast(queue.size(), dtypes.float32) * (1. / capacity))\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/traceback_utils.py:153: in error_handler\n    raise e.with_traceback(filtered_tb) from None\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Mock name='FIFOQueue().size()._as_graph_element().graph.as_default()' id='5819706064'>\nname = '__enter__'\n\n    def __getattr__(self, name):\n        if name in {'_mock_methods', '_mock_unsafe'}:\n            raise AttributeError(name)\n        elif self._mock_methods is not None:\n            if name not in self._mock_methods or name in _all_magics:\n                raise AttributeError(\"Mock object has no attribute %r\" % name)\n        elif _is_magic(name):\n>           raise AttributeError(name)\nE           AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/unittest/mock.py:645: AttributeError\n------------------------------ Captured log call -------------------------------\nWARNING  tensorflow:deprecation.py:350 From /Users/zzf1sh/Documents/Project/TestAgent-CLI-main/exam/tensorflow/python.training.input/tests/test_tensorflow_python_training_input.py:170: batch (from tensorflow.python.training.input) is deprecated and will be removed in a future version.\nInstructions for updating:\nQueue-based input pipelines have been replaced by `tf.data`. Use `tf.data.Dataset.batch(batch_size)` (or `padded_batch(...)` if `dynamic_pad=True`).\n_________ TestBatchFunction.test_batch_basic_functionality[4-64-True] __________\n\nself = <test_tensorflow_python_training_input.TestBatchFunction object at 0x15ad4e4a0>\nbatch_size = 4, capacity = 64, enqueue_many = True\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='4343702832'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5821435040'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5821434752'>\nmock_warnings = <MagicMock name='warn' id='5821446272'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,enqueue_many\", [\n        (2, 32, False),  # Basic case from test plan\n        (4, 64, True),   # Parameter extension: batch enqueue mode\n        (1, 10, False),  # Parameter extension: allow smaller final batch\n    ])\n    def test_batch_basic_functionality(\n        self,\n        batch_size,\n        capacity,\n        enqueue_many,\n        simple_tensor_list,\n        mock_queue_runner,\n        mock_fifo_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test basic batch functionality with various parameters.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_fifo_queue\n        mock_dequeue_op = mock.Mock()\n        # Create mock output tensors with correct shape\n        mock_output1 = mock.Mock()\n        mock_output1.shape = tf.TensorShape([batch_size, 2, 3])\n        mock_output2 = mock.Mock()\n        mock_output2.shape = tf.TensorShape([batch_size, 2, 3])\n    \n        # Return mock tensors instead of real tensors\n        mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n        # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n        mock_size_tensor = mock.Mock()\n        mock_size_tensor.__sub__ = lambda self, other: mock.Mock()  # Allow subtraction\n        mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()  # Allow reverse subtraction\n        mock_queue.size.return_value = mock_size_tensor\n    \n        # Call the batch function\n        with tf.Graph().as_default():\n            # Prepare input tensors\n            if enqueue_many:\n                # For enqueue_many=True, we need to add a batch dimension\n                input_tensors = [\n                    tf.expand_dims(tensor, 0) for tensor in simple_tensor_list\n                ]\n            else:\n                input_tensors = simple_tensor_list\n    \n            # Call the function\n>           output_tensors = batch(\n                tensors=input_tensors,\n                batch_size=batch_size,\n                capacity=capacity,\n                enqueue_many=enqueue_many,\n                dynamic_pad=False,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:170: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1006: in batch\n    return _batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:781: in _batch\n    math_ops.cast(queue.size(), dtypes.float32) * (1. / capacity))\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/traceback_utils.py:153: in error_handler\n    raise e.with_traceback(filtered_tb) from None\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Mock name='FIFOQueue().size()._as_graph_element().graph.as_default()' id='5820496576'>\nname = '__enter__'\n\n    def __getattr__(self, name):\n        if name in {'_mock_methods', '_mock_unsafe'}:\n            raise AttributeError(name)\n        elif self._mock_methods is not None:\n            if name not in self._mock_methods or name in _all_magics:\n                raise AttributeError(\"Mock object has no attribute %r\" % name)\n        elif _is_magic(name):\n>           raise AttributeError(name)\nE           AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/unittest/mock.py:645: AttributeError\n_________ TestBatchFunction.test_batch_basic_functionality[1-10-False] _________\n\nself = <test_tensorflow_python_training_input.TestBatchFunction object at 0x15ad4e680>\nbatch_size = 1, capacity = 10, enqueue_many = False\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5820838096'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5824722928'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5824722448'>\nmock_warnings = <MagicMock name='warn' id='5824714480'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,enqueue_many\", [\n        (2, 32, False),  # Basic case from test plan\n        (4, 64, True),   # Parameter extension: batch enqueue mode\n        (1, 10, False),  # Parameter extension: allow smaller final batch\n    ])\n    def test_batch_basic_functionality(\n        self,\n        batch_size,\n        capacity,\n        enqueue_many,\n        simple_tensor_list,\n        mock_queue_runner,\n        mock_fifo_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test basic batch functionality with various parameters.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_fifo_queue\n        mock_dequeue_op = mock.Mock()\n        # Create mock output tensors with correct shape\n        mock_output1 = mock.Mock()\n        mock_output1.shape = tf.TensorShape([batch_size, 2, 3])\n        mock_output2 = mock.Mock()\n        mock_output2.shape = tf.TensorShape([batch_size, 2, 3])\n    \n        # Return mock tensors instead of real tensors\n        mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n        # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n        mock_size_tensor = mock.Mock()\n        mock_size_tensor.__sub__ = lambda self, other: mock.Mock()  # Allow subtraction\n        mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()  # Allow reverse subtraction\n        mock_queue.size.return_value = mock_size_tensor\n    \n        # Call the batch function\n        with tf.Graph().as_default():\n            # Prepare input tensors\n            if enqueue_many:\n                # For enqueue_many=True, we need to add a batch dimension\n                input_tensors = [\n                    tf.expand_dims(tensor, 0) for tensor in simple_tensor_list\n                ]\n            else:\n                input_tensors = simple_tensor_list\n    \n            # Call the function\n>           output_tensors = batch(\n                tensors=input_tensors,\n                batch_size=batch_size,\n                capacity=capacity,\n                enqueue_many=enqueue_many,\n                dynamic_pad=False,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:170: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1006: in batch\n    return _batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:781: in _batch\n    math_ops.cast(queue.size(), dtypes.float32) * (1. / capacity))\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/traceback_utils.py:153: in error_handler\n    raise e.with_traceback(filtered_tb) from None\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Mock name='FIFOQueue().size()._as_graph_element().graph.as_default()' id='5822230064'>\nname = '__enter__'\n\n    def __getattr__(self, name):\n        if name in {'_mock_methods', '_mock_unsafe'}:\n            raise AttributeError(name)\n        elif self._mock_methods is not None:\n            if name not in self._mock_methods or name in _all_magics:\n                raise AttributeError(\"Mock object has no attribute %r\" % name)\n        elif _is_magic(name):\n>           raise AttributeError(name)\nE           AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/unittest/mock.py:645: AttributeError\n______________ TestBatchFunction.test_batch_with_dictionary_input ______________\n\nself = <test_tensorflow_python_training_input.TestBatchFunction object at 0x15ad4ef80>\nmock_warnings = <MagicMock name='warn' id='5821453488'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5821462848'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5821463184'>\n\n    def test_batch_with_dictionary_input(self, mock_warnings, mock_fifo_queue, mock_add_queue_runner):\n        \"\"\"Test batch function with dictionary input.\"\"\"\n        with tf.Graph().as_default():\n            # Create dictionary of tensors\n            tensor_dict = {\n                'features': tf.constant([[1.0, 2.0], [3.0, 4.0]], dtype=tf.float32),\n                'labels': tf.constant([0, 1], dtype=tf.int32)\n            }\n    \n            # Setup mock\n            mock_queue = mock_fifo_queue\n    \n            # Create mock output tensors\n            mock_output1 = mock.Mock()\n            mock_output1.shape = tf.TensorShape([2, 2, 2])\n            mock_output2 = mock.Mock()\n            mock_output2.shape = tf.TensorShape([2, 2])\n            mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n            # Call batch with dictionary\n>           output_dict = batch(\n                tensors=tensor_dict,\n                batch_size=2,\n                capacity=32,\n                enqueue_many=False,\n                dynamic_pad=False\n            )\n\ntests/test_tensorflow_python_training_input.py:271: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1006: in batch\n    return _batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:781: in _batch\n    math_ops.cast(queue.size(), dtypes.float32) * (1. / capacity))\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/traceback_utils.py:153: in error_handler\n    raise e.with_traceback(filtered_tb) from None\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Mock name='FIFOQueue().size()._as_graph_element().graph.as_default()' id='5820855104'>\nname = '__enter__'\n\n    def __getattr__(self, name):\n        if name in {'_mock_methods', '_mock_unsafe'}:\n            raise AttributeError(name)\n        elif self._mock_methods is not None:\n            if name not in self._mock_methods or name in _all_magics:\n                raise AttributeError(\"Mock object has no attribute %r\" % name)\n        elif _is_magic(name):\n>           raise AttributeError(name)\nE           AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/unittest/mock.py:645: AttributeError\n__ TestShuffleBatchFunction.test_shuffle_batch_basic_functionality[2-32-8-42] __\n\nself = <test_tensorflow_python_training_input.TestShuffleBatchFunction object at 0x15ad4f460>\nbatch_size = 2, capacity = 32, min_after_dequeue = 8, seed = 42\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5820837376'>\nmock_random_shuffle_queue = <Mock name='RandomShuffleQueue()' id='5822229968'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5822222336'>\nmock_warnings = <MagicMock name='warn' id='5822223632'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,min_after_dequeue,seed\", [\n        (2, 32, 8, 42),      # Basic case from test plan\n        (2, 32, 16, 123),    # Parameter extension: different seed and queue params\n    ])\n    def test_shuffle_batch_basic_functionality(\n        self,\n        batch_size,\n        capacity,\n        min_after_dequeue,\n        seed,\n        simple_tensor_list,\n        mock_queue_runner,\n        mock_random_shuffle_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test shuffle batch functionality with various parameters.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_random_shuffle_queue\n        mock_dequeue_op = mock.Mock()\n        # Create mock output tensors with correct shape\n        mock_output1 = mock.Mock()\n        mock_output1.shape = tf.TensorShape([batch_size, 2, 3])\n        mock_output2 = mock.Mock()\n        mock_output2.shape = tf.TensorShape([batch_size, 2, 3])\n    \n        # Return mock tensors instead of real tensors\n        mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n        # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n        mock_size_tensor = mock.Mock()\n        mock_size_tensor.__sub__ = lambda self, other: mock.Mock()  # Allow subtraction\n        mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()  # Allow reverse subtraction\n        mock_queue.size.return_value = mock_size_tensor\n    \n        # Call the shuffle_batch function\n        with tf.Graph().as_default():\n>           output_tensors = shuffle_batch(\n                tensors=simple_tensor_list,\n                batch_size=batch_size,\n                capacity=capacity,\n                min_after_dequeue=min_after_dequeue,\n                seed=seed,\n                enqueue_many=False,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:333: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1332: in shuffle_batch\n    return _shuffle_batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:859: in _shuffle_batch\n    math_ops.maximum(0, queue.size() - min_after_dequeue), dtypes.float32) *\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/ops/gen_math_ops.py:6209: in maximum\n    _, _, _op, _outputs = _op_def_library._apply_op_helper(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nop_type_name = 'Maximum', name = 'Maximum'\nkeywords = {'x': 0, 'y': <Mock id='4343977664'>}\nop_def = name: \"Maximum\"\ninput_arg {\n  name: \"x\"\n  type_attr: \"T\"\n}\ninput_arg {\n  name: \"y\"\n  type_attr: \"T\"\n}\noutput_arg {\n  n...     type: DT_UINT16\n      type: DT_INT32\n      type: DT_UINT32\n      type: DT_INT64\n      type: DT_UINT64\n    }\n  }\n}\n\ng = <Mock name='mock._as_graph_element().graph' id='4343975504'>\nproducer = <Mock name='mock._as_graph_element().graph.graph_def_versions.producer' id='4343975744'>\nattrs = {}, attr_protos = {}, default_type_attr_map = {}\nallowed_list_attr_map = {'T': [14, 19, 1, 2, 6, 4, 5, 17, 3, 22, 9, 23]}\n\n    def _apply_op_helper(op_type_name, name=None, **keywords):  # pylint: disable=invalid-name\n      \"\"\"Implementation of apply_op that returns output_structure, op.\"\"\"\n    \n      op_def, g, producer = _GetOpDef(op_type_name, keywords)\n      name = name if name else op_type_name\n    \n      attrs, attr_protos = {}, {}\n      default_type_attr_map, allowed_list_attr_map = {}, {}\n      inputs, input_types, output_structure = [], [], []\n      fallback = True\n    \n      if (_CanExtractAttrsFastPath(op_def, keywords) and\n          flags.config().graph_building_optimization.value()):\n        fallback = False\n        attr_protos, inputs, input_types, output_structure = (\n            op_def_library_pybind.process_inputs(op_type_name, producer, keywords))\n    \n      if fallback:\n        _CheckOpDeprecation(op_type_name, op_def, producer)\n        _ExtractDefaultTypesAndAllowedTypes(op_def, default_type_attr_map,\n                                            allowed_list_attr_map)\n    \n      # Requires that op_def has passed validation (using the C++\n      # ValidateOpDef() from ../framework/op_def_util.h).\n>     with g.as_default(), ops.name_scope(name) as scope:\nE     AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/op_def_library.py:777: AttributeError\n------------------------------ Captured log call -------------------------------\nWARNING  tensorflow:deprecation.py:350 From /Users/zzf1sh/Documents/Project/TestAgent-CLI-main/exam/tensorflow/python.training.input/tests/test_tensorflow_python_training_input.py:333: shuffle_batch (from tensorflow.python.training.input) is deprecated and will be removed in a future version.\nInstructions for updating:\nQueue-based input pipelines have been replaced by `tf.data`. Use `tf.data.Dataset.shuffle(min_after_dequeue).batch(batch_size)`.\n_ TestShuffleBatchFunction.test_shuffle_batch_basic_functionality[2-32-16-123] _\n\nself = <test_tensorflow_python_training_input.TestShuffleBatchFunction object at 0x15ad4f640>\nbatch_size = 2, capacity = 32, min_after_dequeue = 16, seed = 123\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5821459632'>\nmock_random_shuffle_queue = <Mock name='RandomShuffleQueue()' id='5821449312'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5821449168'>\nmock_warnings = <MagicMock name='warn' id='5821599024'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,min_after_dequeue,seed\", [\n        (2, 32, 8, 42),      # Basic case from test plan\n        (2, 32, 16, 123),    # Parameter extension: different seed and queue params\n    ])\n    def test_shuffle_batch_basic_functionality(\n        self,\n        batch_size,\n        capacity,\n        min_after_dequeue,\n        seed,\n        simple_tensor_list,\n        mock_queue_runner,\n        mock_random_shuffle_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test shuffle batch functionality with various parameters.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_random_shuffle_queue\n        mock_dequeue_op = mock.Mock()\n        # Create mock output tensors with correct shape\n        mock_output1 = mock.Mock()\n        mock_output1.shape = tf.TensorShape([batch_size, 2, 3])\n        mock_output2 = mock.Mock()\n        mock_output2.shape = tf.TensorShape([batch_size, 2, 3])\n    \n        # Return mock tensors instead of real tensors\n        mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n        # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n        mock_size_tensor = mock.Mock()\n        mock_size_tensor.__sub__ = lambda self, other: mock.Mock()  # Allow subtraction\n        mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()  # Allow reverse subtraction\n        mock_queue.size.return_value = mock_size_tensor\n    \n        # Call the shuffle_batch function\n        with tf.Graph().as_default():\n>           output_tensors = shuffle_batch(\n                tensors=simple_tensor_list,\n                batch_size=batch_size,\n                capacity=capacity,\n                min_after_dequeue=min_after_dequeue,\n                seed=seed,\n                enqueue_many=False,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:333: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1332: in shuffle_batch\n    return _shuffle_batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:859: in _shuffle_batch\n    math_ops.maximum(0, queue.size() - min_after_dequeue), dtypes.float32) *\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/ops/gen_math_ops.py:6209: in maximum\n    _, _, _op, _outputs = _op_def_library._apply_op_helper(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nop_type_name = 'Maximum', name = 'Maximum'\nkeywords = {'x': 0, 'y': <Mock id='5819615312'>}\nop_def = name: \"Maximum\"\ninput_arg {\n  name: \"x\"\n  type_attr: \"T\"\n}\ninput_arg {\n  name: \"y\"\n  type_attr: \"T\"\n}\noutput_arg {\n  n...     type: DT_UINT16\n      type: DT_INT32\n      type: DT_UINT32\n      type: DT_INT64\n      type: DT_UINT64\n    }\n  }\n}\n\ng = <Mock name='mock._as_graph_element().graph' id='5819622704'>\nproducer = <Mock name='mock._as_graph_element().graph.graph_def_versions.producer' id='5819622512'>\nattrs = {}, attr_protos = {}, default_type_attr_map = {}\nallowed_list_attr_map = {'T': [14, 19, 1, 2, 6, 4, 5, 17, 3, 22, 9, 23]}\n\n    def _apply_op_helper(op_type_name, name=None, **keywords):  # pylint: disable=invalid-name\n      \"\"\"Implementation of apply_op that returns output_structure, op.\"\"\"\n    \n      op_def, g, producer = _GetOpDef(op_type_name, keywords)\n      name = name if name else op_type_name\n    \n      attrs, attr_protos = {}, {}\n      default_type_attr_map, allowed_list_attr_map = {}, {}\n      inputs, input_types, output_structure = [], [], []\n      fallback = True\n    \n      if (_CanExtractAttrsFastPath(op_def, keywords) and\n          flags.config().graph_building_optimization.value()):\n        fallback = False\n        attr_protos, inputs, input_types, output_structure = (\n            op_def_library_pybind.process_inputs(op_type_name, producer, keywords))\n    \n      if fallback:\n        _CheckOpDeprecation(op_type_name, op_def, producer)\n        _ExtractDefaultTypesAndAllowedTypes(op_def, default_type_attr_map,\n                                            allowed_list_attr_map)\n    \n      # Requires that op_def has passed validation (using the C++\n      # ValidateOpDef() from ../framework/op_def_util.h).\n>     with g.as_default(), ops.name_scope(name) as scope:\nE     AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/op_def_library.py:777: AttributeError\n____ TestShuffleBatchFunction.test_shuffle_batch_with_seed_reproducibility _____\n\nself = <test_tensorflow_python_training_input.TestShuffleBatchFunction object at 0x15ad4fa30>\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_random_shuffle_queue = <Mock name='RandomShuffleQueue()' id='5822230208'>\nmock_warnings = <MagicMock name='warn' id='5822218640'>\n\n    def test_shuffle_batch_with_seed_reproducibility(\n        self,\n        simple_tensor_list,\n        mock_random_shuffle_queue,\n        mock_warnings\n    ):\n        \"\"\"Test that shuffle batch with same seed produces same results.\"\"\"\n        with tf.Graph().as_default():\n            # First call with seed=42\n            mock_queue1 = mock.Mock()\n            mock_random_shuffle_queue.return_value = mock_queue1\n    \n            # Create mock output tensors\n            mock_output1 = mock.Mock()\n            mock_output1.shape = tf.TensorShape([2, 2, 3])\n            mock_output2 = mock.Mock()\n            mock_output2.shape = tf.TensorShape([2, 2, 3])\n            mock_queue1.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n            # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n            mock_size_tensor1 = mock.Mock()\n            mock_size_tensor1.__sub__ = lambda self, other: mock.Mock()\n            mock_size_tensor1.__rsub__ = lambda self, other: mock.Mock()\n            mock_queue1.size.return_value = mock_size_tensor1\n    \n>           output1 = shuffle_batch(\n                tensors=simple_tensor_list,\n                batch_size=2,\n                capacity=32,\n                min_after_dequeue=8,\n                seed=42,\n                enqueue_many=False\n            )\n\ntests/test_tensorflow_python_training_input.py:392: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1332: in shuffle_batch\n    return _shuffle_batch(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ntensors = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nbatch_size = 2, capacity = 32, min_after_dequeue = 8\nkeep_input = <tf.Tensor 'shuffle_batch/Const:0' shape=() dtype=bool>\nnum_threads = 1, seed = 42, enqueue_many = False, shapes = [[2, 3], [2, 3]]\nallow_smaller_final_batch = False, shared_name = None, name = 'shuffle_batch/'\n\n    def _shuffle_batch(tensors, batch_size, capacity, min_after_dequeue,\n                       keep_input, num_threads=1, seed=None, enqueue_many=False,\n                       shapes=None, allow_smaller_final_batch=False,\n                       shared_name=None, name=None):\n      \"\"\"Helper function for `shuffle_batch` and `maybe_shuffle_batch`.\"\"\"\n      if context.executing_eagerly():\n        raise ValueError(\n            \"Input pipelines based on Queues are not supported when eager execution\"\n            \" is enabled. Please use tf.data to ingest data into your model\"\n            \" instead.\")\n      tensor_list = _as_tensor_list(tensors)\n      with ops.name_scope(name, \"shuffle_batch\",\n                          list(tensor_list) + [keep_input]) as name:\n        if capacity <= min_after_dequeue:\n          raise ValueError(\"capacity %d must be bigger than min_after_dequeue %d.\"\n                           % (capacity, min_after_dequeue))\n        tensor_list = _validate(tensor_list)\n        keep_input = _validate_keep_input(keep_input, enqueue_many)\n        tensor_list, sparse_info = _store_sparse_tensors(\n            tensor_list, enqueue_many, keep_input)\n        types = _dtypes([tensor_list])\n        shapes = _shapes([tensor_list], shapes, enqueue_many)\n        queue = data_flow_ops.RandomShuffleQueue(\n            capacity=capacity, min_after_dequeue=min_after_dequeue, seed=seed,\n            dtypes=types, shapes=shapes, shared_name=shared_name)\n        _enqueue(queue, tensor_list, num_threads, enqueue_many, keep_input)\n        full = (math_ops.cast(\n>           math_ops.maximum(0, queue.size() - min_after_dequeue), dtypes.float32) *\n                (1. / (capacity - min_after_dequeue)))\nE       TypeError: unsupported operand type(s) for -: 'Mock' and 'int'\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:859: TypeError\n________ TestShuffleBatchFunction.test_shuffle_batch_with_enqueue_many _________\n\nself = <test_tensorflow_python_training_input.TestShuffleBatchFunction object at 0x15ad84130>\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_random_shuffle_queue = <Mock name='RandomShuffleQueue()' id='5822146512'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5822141088'>\nmock_warnings = <MagicMock name='warn' id='5822150352'>\n\n    def test_shuffle_batch_with_enqueue_many(\n        self,\n        simple_tensor_list,\n        mock_random_shuffle_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test shuffle batch with enqueue_many=True.\"\"\"\n        with tf.Graph().as_default():\n            # Prepare input tensors with batch dimension\n            input_tensors = [\n                tf.expand_dims(tensor, 0) for tensor in simple_tensor_list\n            ]\n    \n            # Setup mock\n            mock_queue = mock_random_shuffle_queue\n    \n            # Create mock output tensors\n            mock_output1 = mock.Mock()\n            mock_output1.shape = tf.TensorShape([2, 1, 2, 3])\n            mock_output2 = mock.Mock()\n            mock_output2.shape = tf.TensorShape([2, 1, 2, 3])\n            mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n            # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n            mock_size_tensor = mock.Mock()\n            mock_size_tensor.__sub__ = lambda self, other: mock.Mock()\n            mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()\n            mock_queue.size.return_value = mock_size_tensor\n    \n            # Call shuffle_batch with enqueue_many=True\n>           output_tensors = shuffle_batch(\n                tensors=input_tensors,\n                batch_size=2,\n                capacity=32,\n                min_after_dequeue=8,\n                seed=42,\n                enqueue_many=True,\n                allow_smaller_final_batch=False\n            )\n\ntests/test_tensorflow_python_training_input.py:491: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1332: in shuffle_batch\n    return _shuffle_batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:859: in _shuffle_batch\n    math_ops.maximum(0, queue.size() - min_after_dequeue), dtypes.float32) *\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/ops/gen_math_ops.py:6209: in maximum\n    _, _, _op, _outputs = _op_def_library._apply_op_helper(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nop_type_name = 'Maximum', name = 'Maximum'\nkeywords = {'x': 0, 'y': <Mock id='5820822192'>}\nop_def = name: \"Maximum\"\ninput_arg {\n  name: \"x\"\n  type_attr: \"T\"\n}\ninput_arg {\n  name: \"y\"\n  type_attr: \"T\"\n}\noutput_arg {\n  n...     type: DT_UINT16\n      type: DT_INT32\n      type: DT_UINT32\n      type: DT_INT64\n      type: DT_UINT64\n    }\n  }\n}\n\ng = <Mock name='mock._as_graph_element().graph' id='5820822288'>\nproducer = <Mock name='mock._as_graph_element().graph.graph_def_versions.producer' id='5820822672'>\nattrs = {}, attr_protos = {}, default_type_attr_map = {}\nallowed_list_attr_map = {'T': [14, 19, 1, 2, 6, 4, 5, 17, 3, 22, 9, 23]}\n\n    def _apply_op_helper(op_type_name, name=None, **keywords):  # pylint: disable=invalid-name\n      \"\"\"Implementation of apply_op that returns output_structure, op.\"\"\"\n    \n      op_def, g, producer = _GetOpDef(op_type_name, keywords)\n      name = name if name else op_type_name\n    \n      attrs, attr_protos = {}, {}\n      default_type_attr_map, allowed_list_attr_map = {}, {}\n      inputs, input_types, output_structure = [], [], []\n      fallback = True\n    \n      if (_CanExtractAttrsFastPath(op_def, keywords) and\n          flags.config().graph_building_optimization.value()):\n        fallback = False\n        attr_protos, inputs, input_types, output_structure = (\n            op_def_library_pybind.process_inputs(op_type_name, producer, keywords))\n    \n      if fallback:\n        _CheckOpDeprecation(op_type_name, op_def, producer)\n        _ExtractDefaultTypesAndAllowedTypes(op_def, default_type_attr_map,\n                                            allowed_list_attr_map)\n    \n      # Requires that op_def has passed validation (using the C++\n      # ValidateOpDef() from ../framework/op_def_util.h).\n>     with g.as_default(), ops.name_scope(name) as scope:\nE     AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/op_def_library.py:777: AttributeError\n____ TestShuffleBatchFunction.test_shuffle_batch_allow_smaller_final_batch _____\n\nself = <test_tensorflow_python_training_input.TestShuffleBatchFunction object at 0x15ad84490>\nsimple_tensor_list = [<tf.Tensor 'Const:0' shape=(2, 3) dtype=float32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=float32>]\nmock_random_shuffle_queue = <Mock name='RandomShuffleQueue()' id='5825360128'>\nmock_warnings = <MagicMock name='warn' id='5825358304'>\n\n    def test_shuffle_batch_allow_smaller_final_batch(\n        self,\n        simple_tensor_list,\n        mock_random_shuffle_queue,\n        mock_warnings\n    ):\n        \"\"\"Test shuffle batch with allow_smaller_final_batch=True.\"\"\"\n        with tf.Graph().as_default():\n            # Setup mock\n            mock_queue = mock_random_shuffle_queue\n    \n            # Create mock output tensors with smaller batch size\n            mock_output1 = mock.Mock()\n            mock_output1.shape = tf.TensorShape([1, 2, 3])  # Smaller batch\n            mock_output2 = mock.Mock()\n            mock_output2.shape = tf.TensorShape([1, 2, 3])  # Smaller batch\n            mock_queue.dequeue_many.return_value = [mock_output1, mock_output2]\n    \n            # Mock queue.size() to return a Tensor that can be used in arithmetic operations\n            mock_size_tensor = mock.Mock()\n            mock_size_tensor.__sub__ = lambda self, other: mock.Mock()\n            mock_size_tensor.__rsub__ = lambda self, other: mock.Mock()\n            mock_queue.size.return_value = mock_size_tensor\n    \n            # Call shuffle_batch with allow_smaller_final_batch=True\n>           output_tensors = shuffle_batch(\n                tensors=simple_tensor_list,\n                batch_size=2,\n                capacity=32,\n                min_after_dequeue=8,\n                seed=42,\n                enqueue_many=False,\n                allow_smaller_final_batch=True\n            )\n\ntests/test_tensorflow_python_training_input.py:535: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1332: in shuffle_batch\n    return _shuffle_batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:859: in _shuffle_batch\n    math_ops.maximum(0, queue.size() - min_after_dequeue), dtypes.float32) *\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/ops/gen_math_ops.py:6209: in maximum\n    _, _, _op, _outputs = _op_def_library._apply_op_helper(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nop_type_name = 'Maximum', name = 'Maximum'\nkeywords = {'x': 0, 'y': <Mock id='5821449312'>}\nop_def = name: \"Maximum\"\ninput_arg {\n  name: \"x\"\n  type_attr: \"T\"\n}\ninput_arg {\n  name: \"y\"\n  type_attr: \"T\"\n}\noutput_arg {\n  n...     type: DT_UINT16\n      type: DT_INT32\n      type: DT_UINT32\n      type: DT_INT64\n      type: DT_UINT64\n    }\n  }\n}\n\ng = <Mock name='mock._as_graph_element().graph' id='5821449216'>\nproducer = <Mock name='mock._as_graph_element().graph.graph_def_versions.producer' id='5821449408'>\nattrs = {}, attr_protos = {}, default_type_attr_map = {}\nallowed_list_attr_map = {'T': [14, 19, 1, 2, 6, 4, 5, 17, 3, 22, 9, 23]}\n\n    def _apply_op_helper(op_type_name, name=None, **keywords):  # pylint: disable=invalid-name\n      \"\"\"Implementation of apply_op that returns output_structure, op.\"\"\"\n    \n      op_def, g, producer = _GetOpDef(op_type_name, keywords)\n      name = name if name else op_type_name\n    \n      attrs, attr_protos = {}, {}\n      default_type_attr_map, allowed_list_attr_map = {}, {}\n      inputs, input_types, output_structure = [], [], []\n      fallback = True\n    \n      if (_CanExtractAttrsFastPath(op_def, keywords) and\n          flags.config().graph_building_optimization.value()):\n        fallback = False\n        attr_protos, inputs, input_types, output_structure = (\n            op_def_library_pybind.process_inputs(op_type_name, producer, keywords))\n    \n      if fallback:\n        _CheckOpDeprecation(op_type_name, op_def, producer)\n        _ExtractDefaultTypesAndAllowedTypes(op_def, default_type_attr_map,\n                                            allowed_list_attr_map)\n    \n      # Requires that op_def has passed validation (using the C++\n      # ValidateOpDef() from ../framework/op_def_util.h).\n>     with g.as_default(), ops.name_scope(name) as scope:\nE     AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/op_def_library.py:777: AttributeError\n_ TestDynamicPaddingFunction.test_batch_with_dynamic_padding[2-32-True-False] __\n\nself = <test_tensorflow_python_training_input.TestDynamicPaddingFunction object at 0x15ad849a0>\nbatch_size = 2, capacity = 32, dynamic_pad = True\nallow_smaller_final_batch = False\nvariable_length_tensors = [<tf.Tensor 'Const:0' shape=(3, 2) dtype=int32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=int32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5819650480'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5820496288'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5820490672'>\nmock_warnings = <MagicMock name='warn' id='5820490336'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,dynamic_pad,allow_smaller_final_batch\", [\n        (2, 32, True, False),   # Basic case from test plan\n        (3, 48, True, True),    # Parameter extension: dynamic pad with smaller batch\n    ])\n    def test_batch_with_dynamic_padding(\n        self,\n        batch_size,\n        capacity,\n        dynamic_pad,\n        allow_smaller_final_batch,\n        variable_length_tensors,\n        mock_queue_runner,\n        mock_fifo_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test batch function with dynamic padding for variable length tensors.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_fifo_queue\n        # For dynamic padding, we need to simulate padded output\n        # Create mock tensors with padded shapes\n        padded_tensor1 = mock.Mock()\n        padded_tensor1.shape = tf.TensorShape([batch_size, 3, 3])  # Padded to max length\n        padded_tensor2 = mock.Mock()\n        padded_tensor2.shape = tf.TensorShape([batch_size, 3, 3])  # Padded to max length\n    \n        mock_queue.dequeue_many.return_value = [padded_tensor1, padded_tensor2]\n    \n        # Call the batch function with dynamic_pad=True\n        with tf.Graph().as_default():\n            output_tensors = batch(\n                tensors=variable_length_tensors,\n                batch_size=batch_size,\n                capacity=capacity,\n                enqueue_many=False,\n                dynamic_pad=dynamic_pad,\n                allow_smaller_final_batch=allow_smaller_final_batch\n            )\n    \n            # Verify deprecation warning\n            assert_deprecation_warning_called(mock_warnings)\n    \n            # Verify queue runner was added\n            assert_queue_runner_added(mock_add_queue_runner, mock_queue_runner)\n    \n            # Verify FIFOQueue was created\n>           assert mock_fifo_queue.called\nE           AssertionError: assert False\nE            +  where False = <Mock name='FIFOQueue()' id='5820496288'>.called\n\ntests/test_tensorflow_python_training_input.py:605: AssertionError\n__ TestDynamicPaddingFunction.test_batch_with_dynamic_padding[3-48-True-True] __\n\nself = <test_tensorflow_python_training_input.TestDynamicPaddingFunction object at 0x15ad84b80>\nbatch_size = 3, capacity = 48, dynamic_pad = True\nallow_smaller_final_batch = True\nvariable_length_tensors = [<tf.Tensor 'Const:0' shape=(3, 2) dtype=int32>, <tf.Tensor 'Const_1:0' shape=(2, 3) dtype=int32>]\nmock_queue_runner = <Mock name='QueueRunner()' id='5819711200'>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5821344320'>\nmock_add_queue_runner = <MagicMock name='add_queue_runner' id='5821336784'>\nmock_warnings = <MagicMock name='warn' id='5821349216'>\n\n    @pytest.mark.parametrize(\"batch_size,capacity,dynamic_pad,allow_smaller_final_batch\", [\n        (2, 32, True, False),   # Basic case from test plan\n        (3, 48, True, True),    # Parameter extension: dynamic pad with smaller batch\n    ])\n    def test_batch_with_dynamic_padding(\n        self,\n        batch_size,\n        capacity,\n        dynamic_pad,\n        allow_smaller_final_batch,\n        variable_length_tensors,\n        mock_queue_runner,\n        mock_fifo_queue,\n        mock_add_queue_runner,\n        mock_warnings\n    ):\n        \"\"\"Test batch function with dynamic padding for variable length tensors.\"\"\"\n        # Setup mock queue\n        mock_queue = mock_fifo_queue\n        # For dynamic padding, we need to simulate padded output\n        # Create mock tensors with padded shapes\n        padded_tensor1 = mock.Mock()\n        padded_tensor1.shape = tf.TensorShape([batch_size, 3, 3])  # Padded to max length\n        padded_tensor2 = mock.Mock()\n        padded_tensor2.shape = tf.TensorShape([batch_size, 3, 3])  # Padded to max length\n    \n        mock_queue.dequeue_many.return_value = [padded_tensor1, padded_tensor2]\n    \n        # Call the batch function with dynamic_pad=True\n        with tf.Graph().as_default():\n            output_tensors = batch(\n                tensors=variable_length_tensors,\n                batch_size=batch_size,\n                capacity=capacity,\n                enqueue_many=False,\n                dynamic_pad=dynamic_pad,\n                allow_smaller_final_batch=allow_smaller_final_batch\n            )\n    \n            # Verify deprecation warning\n            assert_deprecation_warning_called(mock_warnings)\n    \n            # Verify queue runner was added\n            assert_queue_runner_added(mock_add_queue_runner, mock_queue_runner)\n    \n            # Verify FIFOQueue was created\n>           assert mock_fifo_queue.called\nE           AssertionError: assert False\nE            +  where False = <Mock name='FIFOQueue()' id='5821344320'>.called\n\ntests/test_tensorflow_python_training_input.py:605: AssertionError\n____________ TestAdditionalEdgeCases.test_batch_with_single_tensor _____________\n\nself = <test_tensorflow_python_training_input.TestAdditionalEdgeCases object at 0x15ad85b40>\nmock_fifo_queue = <Mock name='FIFOQueue()' id='5825549776'>\nmock_warnings = <MagicMock name='warn' id='5825551312'>\n\n    def test_batch_with_single_tensor(self, mock_fifo_queue, mock_warnings):\n        \"\"\"Test batch function with single tensor (not a list).\"\"\"\n        with tf.Graph().as_default():\n            tensor = tf.constant([[1, 2, 3], [4, 5, 6]], dtype=tf.float32)\n    \n            # Setup mock\n            mock_queue = mock_fifo_queue\n            mock_output = mock.Mock()\n            mock_output.shape = tf.TensorShape([2, 2, 3])\n            mock_queue.dequeue_many.return_value = [mock_output]\n    \n            # When batch is called with a single tensor (not in a list),\n            # it should still work and return a single tensor\n            # Note: The batch function expects a list of tensors, but TensorFlow\n            # internally handles single tensors by wrapping them in a list\n>           output = batch(\n                tensors=[tensor],  # Wrap single tensor in a list to avoid iteration error\n                batch_size=2,\n                capacity=32,\n                enqueue_many=False\n            )\n\ntests/test_tensorflow_python_training_input.py:858: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/deprecation.py:357: in new_func\n    return func(*args, **kwargs)\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:1006: in batch\n    return _batch(\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/training/input.py:781: in _batch\n    math_ops.cast(queue.size(), dtypes.float32) * (1. / capacity))\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/util/traceback_utils.py:153: in error_handler\n    raise e.with_traceback(filtered_tb) from None\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Mock name='FIFOQueue().size()._as_graph_element().graph.as_default()' id='5822752960'>\nname = '__enter__'\n\n    def __getattr__(self, name):\n        if name in {'_mock_methods', '_mock_unsafe'}:\n            raise AttributeError(name)\n        elif self._mock_methods is not None:\n            if name not in self._mock_methods or name in _all_magics:\n                raise AttributeError(\"Mock object has no attribute %r\" % name)\n        elif _is_magic(name):\n>           raise AttributeError(name)\nE           AttributeError: __enter__\n\n/opt/anaconda3/envs/testagent-experiment/lib/python3.10/unittest/mock.py:645: AttributeError\n=============================== warnings summary ===============================\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:18\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:18: DeprecationWarning: Call to deprecated create function FileDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    DESCRIPTOR = _descriptor.FileDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:36\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:36: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:43\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:43: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:29\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:29: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _TENSORSHAPEPROTO_DIM = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:73\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:73: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:80\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:80: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:66\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_shape_pb2.py:66: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _TENSORSHAPEPROTO = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:19\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:19: DeprecationWarning: Call to deprecated create function FileDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    DESCRIPTOR = _descriptor.FileDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:33\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:33: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:37\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:37: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:41\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:41: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:45\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:45: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:49\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:49: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:53\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:53: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:57\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:57: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:61\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:61: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:65\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:65: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:69\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:69: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:73\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:73: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:77\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:77: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:81\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:81: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:85\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:85: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:89\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:89: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:93\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:93: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:97\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:97: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:101\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:101: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:105\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:105: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:109\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:109: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:113\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:113: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:117\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:117: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:121\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:121: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:125\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:125: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:129\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:129: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:133\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:133: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:137\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:137: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:141\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:141: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:145\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:145: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:149\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:149: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:153\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:153: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:157\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:157: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:161\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:161: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:165\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:165: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:169\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:169: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:173\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:173: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:177\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:177: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:181\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:181: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:185\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:185: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:189\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:189: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:193\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:193: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:197\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:197: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:201\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:201: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:205\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:205: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:209\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:209: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:213\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:213: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:217\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:217: DeprecationWarning: Call to deprecated create function EnumValueDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.EnumValueDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:27\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/types_pb2.py:27: DeprecationWarning: Call to deprecated create function EnumDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _DATATYPE = _descriptor.EnumDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:20\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:20: DeprecationWarning: Call to deprecated create function FileDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    DESCRIPTOR = _descriptor.FileDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:39\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:39: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:46\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:46: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:32\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:32: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _RESOURCEHANDLEPROTO_DTYPEANDSHAPE = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:76\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:76: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:83\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:83: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:90\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:90: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:97\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:97: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:104\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:104: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:111\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:111: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:69\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/resource_handle_pb2.py:69: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _RESOURCEHANDLEPROTO = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:21\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:21: DeprecationWarning: Call to deprecated create function FileDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    DESCRIPTOR = _descriptor.FileDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:40\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:40: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:47\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:47: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:54\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:54: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:61\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:61: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:68\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:68: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:75\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:75: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:82\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:82: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:89\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:89: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:96\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:96: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:103\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:103: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:110\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:110: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:117\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:117: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:124\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:124: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:131\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:131: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:138\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:138: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:145\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:145: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:152\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:152: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:33\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:33: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _TENSORPROTO = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:183\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:183: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:190\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:190: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:197\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:197: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:176\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/tensor_pb2.py:176: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _VARIANTTENSORDATAPROTO = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:21\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:21: DeprecationWarning: Call to deprecated create function FileDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    DESCRIPTOR = _descriptor.FileDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:40\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:40: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:47\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:47: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:54\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:54: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:61\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:61: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:68\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:68: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:75\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:75: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:82\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:82: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:89\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:89: DeprecationWarning: Call to deprecated create function FieldDescriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _descriptor.FieldDescriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:33\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/core/framework/attr_value_pb2.py:33: DeprecationWarning: Call to deprecated create function Descriptor(). Note: Create unlinked descriptors is going to go away. Please use get/find descriptors from generated code or query the descriptor_pool.\n    _ATTRVALUE_LISTVALUE = _descriptor.Descriptor(\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/dtypes.py:205\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorflow/python/framework/dtypes.py:205: DeprecationWarning: `np.bool8` is a deprecated alias for `np.bool_`.  (Deprecated NumPy 1.24)\n    np.bool8: (False, True),\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/flatbuffers/compat.py:19\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/flatbuffers/compat.py:19: DeprecationWarning: the imp module is deprecated in favour of importlib and slated for removal in Python 3.12; see the module's documentation for alternative uses\n    import imp\n\n../../../../../../../../opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:326\n  /opt/anaconda3/envs/testagent-experiment/lib/python3.10/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:326: DeprecationWarning: `np.bool8` is a deprecated alias for `np.bool_`.  (Deprecated NumPy 1.24)\n    np.bool8: (False, True),\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n================================ tests coverage ================================\n______________ coverage: platform darwin, python 3.10.19-final-0 _______________\n\nName                                             Stmts   Miss Branch BrPart  Cover   Missing\n--------------------------------------------------------------------------------------------\ntest_fix.py                                          7      7      2      0     0%   4-19\ntest_fix_verification.py                            42     42      2      0     0%   4-63\ntests/test_tensorflow_python_training_input.py     352     77     34      3    73%   88-91, 103-114, 180-197, 212-214, 230-232, 247-249, 280-287, 344-365, 402-432, 456-458, 502-508, 546, 609-620, 746->exit, 777-780, 866, 905\n--------------------------------------------------------------------------------------------\nTOTAL                                              401    126     38      3    64%\nCoverage XML written to file coverage.xml\n=========================== short test summary info ============================\nFAILED tests/test_tensorflow_python_training_input.py::TestBatchFunction::test_batch_basic_functionality[2-32-False]\nFAILED tests/test_tensorflow_python_training_input.py::TestBatchFunction::test_batch_basic_functionality[4-64-True]\nFAILED tests/test_tensorflow_python_training_input.py::TestBatchFunction::test_batch_basic_functionality[1-10-False]\nFAILED tests/test_tensorflow_python_training_input.py::TestBatchFunction::test_batch_with_dictionary_input\nFAILED tests/test_tensorflow_python_training_input.py::TestShuffleBatchFunction::test_shuffle_batch_basic_functionality[2-32-8-42]\nFAILED tests/test_tensorflow_python_training_input.py::TestShuffleBatchFunction::test_shuffle_batch_basic_functionality[2-32-16-123]\nFAILED tests/test_tensorflow_python_training_input.py::TestShuffleBatchFunction::test_shuffle_batch_with_seed_reproducibility\nFAILED tests/test_tensorflow_python_training_input.py::TestShuffleBatchFunction::test_shuffle_batch_with_enqueue_many\nFAILED tests/test_tensorflow_python_training_input.py::TestShuffleBatchFunction::test_shuffle_batch_allow_smaller_final_batch\nFAILED tests/test_tensorflow_python_training_input.py::TestDynamicPaddingFunction::test_batch_with_dynamic_padding[2-32-True-False]\nFAILED tests/test_tensorflow_python_training_input.py::TestDynamicPaddingFunction::test_batch_with_dynamic_padding[3-48-True-True]\nFAILED tests/test_tensorflow_python_training_input.py::TestAdditionalEdgeCases::test_batch_with_single_tensor\n12 failed, 17 passed, 103 warnings in 3.49s\n\nError: exit 1",
    "exit_code.txt": "1",
    "analysis_plan.json": "{\n  \"status\": \"未完全通过\",\n  \"passed\": 17,\n  \"failed\": 12,\n  \"errors\": 0,\n  \"collection_errors\": false,\n  \"block_limit\": 3,\n  \"failures\": [\n    {\n      \"test\": \"TestBatchFunction::test_batch_basic_functionality[2-32-False]\",\n      \"block_id\": \"CASE_01\",\n      \"error_type\": \"AttributeError\",\n      \"action\": \"rewrite_block\",\n      \"note\": \"Mock对象缺少__enter__方法，无法在with语句中使用\"\n    },\n    {\n      \"test\": \"TestShuffleBatchFunction::test_shuffle_batch_with_seed_reproducibility\",\n      \"block_id\": \"CASE_02\",\n      \"error_type\": \"TypeError\",\n      \"action\": \"rewrite_block\",\n      \"note\": \"Mock对象不能与整数进行运算，需要正确模拟queue.size()返回值\"\n    },\n    {\n      \"test\": \"TestDynamicPaddingFunction::test_batch_with_dynamic_padding[2-32-True-False]\",\n      \"block_id\": \"CASE_03\",\n      \"error_type\": \"AssertionError\",\n      \"action\": \"rewrite_block\",\n      \"note\": \"mock_fifo_queue未被调用，需要修复mock设置\"\n    }\n  ],\n  \"deferred\": [\n    {\n      \"test\": \"TestBatchFunction::test_batch_basic_functionality[4-64-True]\",\n      \"reason\": \"错误类型重复，等待CASE_01修复\"\n    },\n    {\n      \"test\": \"TestBatchFunction::test_batch_basic_functionality[1-10-False]\",\n      \"reason\": \"错误类型重复，等待CASE_01修复\"\n    },\n    {\n      \"test\": \"TestBatchFunction::test_batch_with_dictionary_input\",\n      \"reason\": \"错误类型重复，等待CASE_01修复\"\n    },\n    {\n      \"test\": \"TestShuffleBatchFunction::test_shuffle_batch_basic_functionality[2-32-8-42]\",\n      \"reason\": \"错误类型重复，等待CASE_02修复\"\n    },\n    {\n      \"test\": \"TestShuffleBatchFunction::test_shuffle_batch_basic_functionality[2-32-16-123]\",\n      \"reason\": \"错误类型重复，等待CASE_02修复\"\n    },\n    {\n      \"test\": \"TestShuffleBatchFunction::test_shuffle_batch_with_enqueue_many\",\n      \"reason\": \"错误类型重复，等待CASE_02修复\"\n    },\n    {\n      \"test\": \"TestShuffleBatchFunction::test_shuffle_batch_allow_smaller_final_batch\",\n      \"reason\": \"错误类型重复，等待CASE_02修复\"\n    },\n    {\n      \"test\": \"TestDynamicPaddingFunction::test_batch_with_dynamic_padding[3-48-True-True]\",\n      \"reason\": \"错误类型重复，等待CASE_03修复\"\n    },\n    {\n      \"test\": \"TestAdditionalEdgeCases::test_batch_with_single_tensor\",\n      \"reason\": \"错误类型重复，等待CASE_01修复\"\n    }\n  ],\n  \"stop_recommended\": true,\n  \"stop_reason\": \"本轮失败集合与上一轮完全重复，表明修复未生效或修复方向错误\"\n}",
    "analysis.md": "# 测试执行分析报告\n\n## 状态与统计\n- **状态**: 未完全通过\n- **通过测试**: 17\n- **失败测试**: 12\n- **错误测试**: 0\n- **测试收集错误**: 否\n\n## 待修复 BLOCK 列表 (≤3)\n\n### 1. CASE_01 - 基本批量处理功能验证\n- **测试**: TestBatchFunction::test_batch_basic_functionality[2-32-False]\n- **错误类型**: AttributeError\n- **修复动作**: rewrite_block\n- **问题**: Mock对象缺少__enter__方法，无法在with语句中使用\n\n### 2. CASE_02 - 随机打乱批量验证\n- **测试**: TestShuffleBatchFunction::test_shuffle_batch_with_seed_reproducibility\n- **错误类型**: TypeError\n- **修复动作**: rewrite_block\n- **问题**: Mock对象不能与整数进行运算，需要正确模拟queue.size()返回值\n\n### 3. CASE_03 - 动态填充功能测试\n- **测试**: TestDynamicPaddingFunction::test_batch_with_dynamic_padding[2-32-True-False]\n- **错误类型**: AssertionError\n- **修复动作**: rewrite_block\n- **问题**: mock_fifo_queue未被调用，需要修复mock设置\n\n## 停止建议\n- **stop_recommended**: true\n- **stop_reason**: 本轮失败集合与上一轮完全重复，表明修复未生效或修复方向错误",
    "test_fix.py": "#!/usr/bin/env python3\n\"\"\"Quick test to verify fixes.\"\"\"\n\nimport pytest\nimport sys\n\n# Run a subset of tests to verify fixes\nif __name__ == \"__main__\":\n    # Test specific functions that were fixed\n    test_args = [\n        \"tests/test_tensorflow_python_training_input.py\",\n        \"-v\",\n        \"-k\", \"test_batch_invalid_batch_size or test_shuffle_batch_invalid_min_after_dequeue or test_dynamic_padding_without_shapes_raises_error\",\n        \"--tb=short\"\n    ]\n    \n    print(\"Running tests to verify fixes...\")\n    exit_code = pytest.main(test_args)\n    sys.exit(exit_code)",
    "test_fix_verification.py": "#!/usr/bin/env python3\n\"\"\"Simple test to verify the mock fix works.\"\"\"\n\nimport sys\nimport os\nsys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))\n\nimport pytest\nimport tensorflow as tf\nfrom unittest import mock\n\n# Test that we can import the modules\ndef test_imports():\n    \"\"\"Test that we can import the required modules.\"\"\"\n    import tensorflow.python.training.queue_runner as qr_module\n    import tensorflow.python.ops.data_flow_ops as df_module\n    \n    assert hasattr(qr_module, 'QueueRunner')\n    assert hasattr(qr_module, 'add_queue_runner')\n    assert hasattr(df_module, 'FIFOQueue')\n    assert hasattr(df_module, 'RandomShuffleQueue')\n    \n    print(\"✓ All imports work correctly\")\n\n# Test mock patching\ndef test_mock_patching():\n    \"\"\"Test that mock patching works with the new approach.\"\"\"\n    import tensorflow.python.training.queue_runner as qr_module\n    import tensorflow.python.ops.data_flow_ops as df_module\n    \n    # Test QueueRunner mock\n    with mock.patch.object(qr_module, 'QueueRunner') as mock_qr:\n        mock_qr.return_value = mock.Mock()\n        instance = qr_module.QueueRunner()\n        assert mock_qr.called\n        print(\"✓ QueueRunner mock works\")\n    \n    # Test FIFOQueue mock\n    with mock.patch.object(df_module, 'FIFOQueue') as mock_fifo:\n        mock_fifo.return_value = mock.Mock()\n        instance = df_module.FIFOQueue()\n        assert mock_fifo.called\n        print(\"✓ FIFOQueue mock works\")\n    \n    # Test RandomShuffleQueue mock\n    with mock.patch.object(df_module, 'RandomShuffleQueue') as mock_rsq:\n        mock_rsq.return_value = mock.Mock()\n        instance = df_module.RandomShuffleQueue()\n        assert mock_rsq.called\n        print(\"✓ RandomShuffleQueue mock works\")\n    \n    # Test add_queue_runner mock\n    with mock.patch.object(qr_module, 'add_queue_runner') as mock_aqr:\n        mock_aqr.return_value = None\n        qr_module.add_queue_runner(mock.Mock())\n        assert mock_aqr.called\n        print(\"✓ add_queue_runner mock works\")\n\nif __name__ == \"__main__\":\n    print(\"Testing mock fix...\")\n    test_imports()\n    test_mock_patching()\n    print(\"\\n✅ All tests passed! The mock fix should work correctly.\")",
    "final_report.md": "# tensorflow.python.training.input 测试结果报告\n\n## 1. 执行摘要\n测试未完全通过，关键阻塞项为Mock对象配置问题导致3个核心用例失败，需优先修复Mock策略以验证基本功能。\n\n**关键发现**：\n- 17个测试通过，12个测试失败，无错误测试\n- 主要阻塞：Mock对象缺少`__enter__`方法、queue.size()返回值模拟错误、mock设置未生效\n- 所有函数已弃用，测试需捕获弃用警告\n\n## 2. 测试范围\n**目标FQN**: `tensorflow.python.training.input`\n\n**测试环境**：\n- 框架：pytest\n- 执行模式：仅graph execution模式\n- 依赖：TensorFlow 1.x兼容API\n- Mock策略：队列运行器、队列对象、弃用警告\n\n**覆盖场景**：\n- ✓ 基本批量处理（batch函数）\n- ✓ 随机打乱批量（shuffle_batch函数）\n- ✓ 动态填充功能（dynamic_pad参数）\n- ✓ 稀疏张量处理（部分）\n- ✓ 文件输入生产者（string_input_producer）\n\n**未覆盖项**：\n- ✗ 多队列批量处理（batch_join/shuffle_batch_join）\n- ✗ 切片输入生产者（slice_input_producer）\n- ✗ 多epoch处理验证\n- ✗ 队列关闭和资源清理\n- ✗ 大容量队列性能测试\n- ✗ 形状推断边界情况\n\n## 3. 结果概览\n**测试统计**：\n- 用例总数：29个（17通过 + 12失败）\n- 通过率：58.6%\n- 失败用例：12个（全部为Mock配置问题）\n- 错误用例：0个\n\n**主要失败点**：\n1. **CASE_01 - 基本批量处理**：Mock对象缺少`__enter__`方法，无法在with语句中使用\n2. **CASE_02 - 随机打乱批量**：Mock对象不能与整数运算，queue.size()返回值模拟错误\n3. **CASE_03 - 动态填充功能**：mock_fifo_queue未被调用，mock设置未生效\n\n## 4. 详细发现\n\n### 高优先级问题（阻塞测试执行）\n\n#### 问题1：Mock对象缺少上下文管理器支持\n- **严重级别**：高\n- **影响用例**：CASE_01所有参数化测试\n- **根因**：Mock对象未实现`__enter__`和`__exit__`方法，无法支持`with`语句\n- **修复动作**：\n  ```python\n  # 为Mock对象添加上下文管理器支持\n  mock_queue = Mock()\n  mock_queue.__enter__ = Mock(return_value=mock_queue)\n  mock_queue.__exit__ = Mock(return_value=None)\n  ```\n\n#### 问题2：Queue.size()返回值模拟错误\n- **严重级别**：高\n- **影响用例**：CASE_02随机打乱批量验证\n- **根因**：Mock对象返回的queue.size()无法与整数进行运算比较\n- **修复动作**：\n  ```python\n  # 正确模拟queue.size()返回值\n  mock_queue.size.return_value = 0  # 返回整数而非Mock对象\n  ```\n\n#### 问题3：Mock设置未生效\n- **严重级别**：高\n- **影响用例**：CASE_03动态填充功能测试\n- **根因**：mock_fifo_queue未被正确调用，mock设置顺序或作用域问题\n- **修复动作**：\n  ```python\n  # 确保mock在正确的作用域生效\n  with patch('tensorflow.python.ops.data_flow_ops.FIFOQueue') as mock_fifo:\n      mock_fifo.return_value = mock_queue\n      # 执行测试逻辑\n  ```\n\n### 中优先级问题（设计层面）\n\n#### 问题4：弃用警告捕获不完整\n- **严重级别**：中\n- **影响**：所有测试用例\n- **根因**：未在所有测试中统一验证弃用警告\n- **建议**：在fixture或基类中统一添加弃用警告断言\n\n#### 问题5：局部变量初始化验证缺失\n- **严重级别**：中\n- **影响**：队列运行器相关功能\n- **根因**：未验证`local_variables_initializer()`调用\n- **建议**：添加对局部变量初始化调用的mock验证\n\n## 5. 覆盖与风险\n\n### 需求覆盖情况\n**已覆盖需求**：\n- ✓ 基本批量处理功能验证（部分）\n- ✓ 随机打乱批量验证（部分）\n- ✓ 动态填充功能测试（部分）\n- ✓ 稀疏张量正确处理（部分）\n- ✓ 文件输入生产者基础功能（部分）\n\n**未覆盖需求**：\n- ✗ 参数边界值验证（极端batch_size、容量等）\n- ✗ 错误与异常场景完整覆盖\n- ✗ 多队列处理场景\n- ✗ 资源清理验证\n\n### 尚未覆盖的边界/缺失信息\n1. **形状推断边界**：动态填充时的复杂形状组合\n2. **稀疏张量复杂处理**：嵌套稀疏结构、混合密集/稀疏张量\n3. **多线程竞态条件**：队列并发访问场景\n4. **性能边界**：超大容量队列（>10000）的内存和性能\n5. **资源泄漏检测**：队列关闭、运行器停止验证\n\n### 已知风险\n- 所有函数已弃用，长期维护性差\n- 仅支持graph execution模式，与现代TF不兼容\n- 队列机制可能引发死锁（未测试）\n- 需要手动变量初始化，易出错\n\n## 6. 后续动作\n\n### 优先级排序的TODO\n\n#### P0 - 立即修复（阻塞测试执行）\n1. **修复Mock对象配置**（1-2天）\n   - 为Mock对象添加`__enter__`/`__exit__`方法\n   - 修正queue.size()返回值模拟\n   - 确保mock设置正确生效\n\n2. **重构Mock策略**（2-3天）\n   - 创建统一的Mock工厂fixture\n   - 标准化队列对象mock配置\n   - 统一弃用警告捕获逻辑\n\n#### P1 - 核心功能验证（3-5天）\n3. **补充基础用例**（2-3天）\n   - 添加参数边界值测试（batch_size=1, capacity=batch_size等）\n   - 补充错误场景测试（非法输入、形状不兼容等）\n   - 验证弃用警告在所有函数中触发\n\n4. **扩展覆盖范围**（3-4天）\n   - 实现多队列处理测试（batch_join/shuffle_batch_join）\n   - 添加切片输入生产者测试（slice_input_producer）\n   - 验证多epoch处理逻辑\n\n#### P2 - 质量提升（5-7天）\n5. **资源管理验证**（2-3天）\n   - 添加队列关闭和资源清理测试\n   - 验证局部变量初始化调用\n   - 检查无资源泄漏\n\n6. **边界条件覆盖**（3-4天）\n   - 测试形状推断失败场景\n   - 验证稀疏张量复杂处理\n   - 添加性能边界测试\n\n#### P3 - 优化与文档（可选）\n7. **测试优化**（2-3天）\n   - 启用strong断言验证\n   - 添加覆盖率检查\n   - 优化测试执行性能\n\n8. **文档完善**（1-2天）\n   - 更新测试设计文档\n   - 添加测试用例说明\n   - 记录已知限制和变通方案\n\n### 环境调整建议\n1. **Mock策略标准化**：创建可重用的mock fixture库\n2. **测试隔离改进**：使用pytest fixture确保测试独立性\n3. **执行环境**：确保测试在graph execution模式下运行\n4. **依赖管理**：明确TensorFlow版本兼容性要求\n\n### 风险评估\n- **技术风险**：Mock配置复杂，可能引入新的测试问题\n- **时间风险**：修复Mock问题后可能发现更多功能缺陷\n- **维护风险**：测试目标为弃用API，长期价值有限\n\n**建议**：优先修复P0问题，验证核心功能后评估是否继续投入测试资源，考虑将重点转移到`tf.data` API测试。"
  },
  "stage_history": [
    {
      "stage": "understand_function",
      "status": "completed",
      "timestamp": "2026-01-26T18:16:45.553027",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "generate_requirements",
      "status": "completed",
      "timestamp": "2026-01-26T18:17:33.783563",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "design_test_plan",
      "status": "completed",
      "timestamp": "2026-01-26T18:19:37.135748",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "generate_code",
      "status": "completed",
      "timestamp": "2026-01-26T18:26:44.709459",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "execute_tests",
      "status": "completed",
      "timestamp": "2026-01-26T18:26:49.381336",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "analyze_results",
      "status": "completed",
      "timestamp": "2026-01-26T18:28:42.633378",
      "attempts": 1,
      "error": null
    },
    {
      "stage": "generate_code",
      "status": "completed",
      "timestamp": "2026-01-26T18:34:43.837765",
      "attempts": 2,
      "error": null
    },
    {
      "stage": "execute_tests",
      "status": "completed",
      "timestamp": "2026-01-26T18:34:48.495960",
      "attempts": 2,
      "error": null
    },
    {
      "stage": "analyze_results",
      "status": "completed",
      "timestamp": "2026-01-26T18:36:36.082086",
      "attempts": 2,
      "error": null
    },
    {
      "stage": "generate_code",
      "status": "completed",
      "timestamp": "2026-01-26T18:44:23.549377",
      "attempts": 3,
      "error": null
    },
    {
      "stage": "execute_tests",
      "status": "completed",
      "timestamp": "2026-01-26T18:44:28.136831",
      "attempts": 3,
      "error": null
    },
    {
      "stage": "analyze_results",
      "status": "completed",
      "timestamp": "2026-01-26T18:46:54.798518",
      "attempts": 3,
      "error": null
    },
    {
      "stage": "generate_code",
      "status": "completed",
      "timestamp": "2026-01-26T18:50:56.958535",
      "attempts": 4,
      "error": null
    },
    {
      "stage": "execute_tests",
      "status": "completed",
      "timestamp": "2026-01-26T18:50:59.799922",
      "attempts": 4,
      "error": null
    },
    {
      "stage": "analyze_results",
      "status": "completed",
      "timestamp": "2026-01-26T18:52:31.986926",
      "attempts": 4,
      "error": null
    },
    {
      "stage": "generate_code",
      "status": "completed",
      "timestamp": "2026-01-26T19:02:25.711510",
      "attempts": 5,
      "error": null
    },
    {
      "stage": "execute_tests",
      "status": "completed",
      "timestamp": "2026-01-26T19:02:29.908639",
      "attempts": 5,
      "error": null
    },
    {
      "stage": "analyze_results",
      "status": "completed",
      "timestamp": "2026-01-26T19:04:09.463268",
      "attempts": 5,
      "error": null
    },
    {
      "stage": "generate_report",
      "status": "completed",
      "timestamp": "2026-01-26T19:05:25.735271",
      "attempts": 1,
      "error": null
    }
  ],
  "user_feedback": []
}