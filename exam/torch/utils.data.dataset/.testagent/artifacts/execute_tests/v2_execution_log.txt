=== Run Tests ===
........FF                                                               [100%]
=================================== FAILURES ===================================
____________________ test_dataset_abstract_class_interface _____________________

    def test_dataset_abstract_class_interface():
        """Dataset 抽象类接口约束"""
        # 测试直接实例化 Dataset 抽象类
        dataset = Dataset()
    
        # 验证 __len__ 方法未实现
        with pytest.raises(TypeError) as exc_info:
            len(dataset)
    
        error_msg = str(exc_info.value).lower()
>       assert "abstract" in error_msg or "not implemented" in error_msg, \
            f"错误信息应提示抽象方法未实现，实际错误信息: {error_msg}"
E       AssertionError: 错误信息应提示抽象方法未实现，实际错误信息: object of type 'dataset' has no len()
E       assert ('abstract' in "object of type 'dataset' has no len()" or 'not implemented' in "object of type 'dataset' has no len()")

tests/test_torch_utils_data_dataset.py:308: AssertionError
______________________ test_random_split_invalid_lengths _______________________

    def test_random_split_invalid_lengths():
        """random_split 长度超过数据集大小的异常测试"""
        dataset = MockDataset(100)
    
        # 测试长度超过数据集大小（整数模式）
        with pytest.raises(ValueError) as exc_info:
            random_split(dataset, [101])
    
        # 验证错误信息
        error_msg = str(exc_info.value).lower()
        assert "sum" in error_msg or "length" in error_msg or "size" in error_msg, \
            f"错误信息应包含长度总和或大小的提示，实际错误信息: {error_msg}"
    
        # 测试负长度（整数模式）- random_split只检查总和，不检查单个负值
        # 但总和为100时，负长度会导致其他长度超过100
>       with pytest.raises(ValueError) as exc_info:
E       Failed: DID NOT RAISE <class 'ValueError'>

tests/test_torch_utils_data_dataset.py:390: Failed
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.10.19-final-0 _______________

Name                                     Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------------------------------
tests/test_torch_utils_data_dataset.py     204     67     56      8    67%   13-17, 21-32, 45, 48, 69, 241-243, 271-272, 277-279, 282->exit, 292->exit, 312-371, 394-403
------------------------------------------------------------------------------------
TOTAL                                      204     67     56      8    67%
Coverage XML written to file coverage.xml
=========================== short test summary info ============================
FAILED tests/test_torch_utils_data_dataset.py::test_dataset_abstract_class_interface
FAILED tests/test_torch_utils_data_dataset.py::test_random_split_invalid_lengths
2 failed, 8 passed in 0.75s

Error: exit 1