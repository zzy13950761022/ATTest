=== Run Tests ===
.....FF..                                                                [100%]
=================================== FAILURES ===================================
________________________ test_transformer_encoder_norm _________________________

    def test_transformer_encoder_norm():
        """Test that TransformerEncoder has normalization layer"""
        d_model = 8
        nhead = 2
        dim_feedforward = 32
    
        # Create encoder layer
        encoder_layer = TransformerEncoderLayer(
            d_model=d_model,
            nhead=nhead,
            dim_feedforward=dim_feedforward,
        )
    
        # Create encoder with norm
        encoder = TransformerEncoder(encoder_layer, num_layers=2)
    
        # Check that encoder has norm layer
        assert hasattr(encoder, 'norm'), "TransformerEncoder should have norm attribute"
>       assert encoder.norm is not None, "TransformerEncoder norm should not be None"
E       AssertionError: TransformerEncoder norm should not be None
E       assert None is not None
E        +  where None = TransformerEncoder(\n  (layers): ModuleList(\n    (0): TransformerEncoderLayer(\n      (self_attn): MultiheadAttention(\n ...ffine=True)\n      (dropout1): Dropout(p=0.1, inplace=False)\n      (dropout2): Dropout(p=0.1, inplace=False)\n    )\n  )\n).norm

tests/test_torch_nn_modules_transformer_g2.py:453: AssertionError
________________________ test_transformer_decoder_norm _________________________

    def test_transformer_decoder_norm():
        """Test that TransformerDecoder has normalization layer"""
        d_model = 8
        nhead = 2
        dim_feedforward = 32
    
        # Create decoder layer
        decoder_layer = TransformerDecoderLayer(
            d_model=d_model,
            nhead=nhead,
            dim_feedforward=dim_feedforward,
        )
    
        # Create decoder with norm
        decoder = TransformerDecoder(decoder_layer, num_layers=2)
    
        # Check that decoder has norm layer
        assert hasattr(decoder, 'norm'), "TransformerDecoder should have norm attribute"
>       assert decoder.norm is not None, "TransformerDecoder norm should not be None"
E       AssertionError: TransformerDecoder norm should not be None
E       assert None is not None
E        +  where None = TransformerDecoder(\n  (layers): ModuleList(\n    (0): TransformerDecoderLayer(\n      (self_attn): MultiheadAttention(\n ...lace=False)\n      (dropout2): Dropout(p=0.1, inplace=False)\n      (dropout3): Dropout(p=0.1, inplace=False)\n    )\n  )\n).norm

tests/test_torch_nn_modules_transformer_g2.py:477: AssertionError
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.10.19-final-0 _______________

Name                                            Stmts   Miss Branch BrPart  Cover   Missing
-------------------------------------------------------------------------------------------
tests/test_torch_nn_modules_transformer_g2.py     144     15     10      1    84%   20, 25, 35-46, 456-457, 480-481
-------------------------------------------------------------------------------------------
TOTAL                                             144     15     10      1    84%
Coverage XML written to file coverage.xml
=========================== short test summary info ============================
FAILED tests/test_torch_nn_modules_transformer_g2.py::test_transformer_encoder_norm
FAILED tests/test_torch_nn_modules_transformer_g2.py::test_transformer_decoder_norm
2 failed, 7 passed in 0.77s

Error: exit 1